<!DOCTYPE html>

<html lang="ru">
<head>
<title>AI и Spring Petclinic: Внедрение ИИ-ассистента с Spring AI (Часть II) / Хабр</title>
</head>
<body>
<div id="mount"><div data-async-called="true" id="app"><div class="tm-layout__wrapper"><!--[--><!-- --><div></div><!-- --><header class="tm-header" data-test-id="header"><div class="tm-page-width"><!--[--><div class="tm-header__container"><!-- --><span class="tm-header__logo-wrap"><a class="tm-header__logo tm-header__logo_hl-ru tm-header__logo" href="/ru/"><svg class="tm-svg-img tm-header__icon" height="16" width="16"><title>Хабр</title><use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a><span class="tm-header__beta-sign" style="display:none;">β</span></span><!--[--><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><!--[--><button class="tm-header__dropdown-toggle"><svg class="tm-svg-img tm-header__icon tm-header__icon_dropdown" height="16" width="16"><title>Открыть список</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#arrow-down"></use></svg></button><!--]--></div><!-- --></div><a class="tm-header__become-author-btn" href="/ru/sandbox/start/">Как стать автором</a><div class="tm-feature tm-feature tm-feature_variant-inline tm-header__feature"><!-- --></div><!-- --><!--]--><!-- --></div><!--]--></div></header><div class="tm-layout"><div class="tm-page-progress-bar"></div><div class="tm-base-layout__header_is-sticky tm-base-layout__header" data-menu-sticky="true"><div class="tm-page-width"><!--[--><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/feed/">Моя лента</a><!--]--><!--[--><a class="tm-main-menu__item" href="/ru/articles/">Все потоки</a><!--]--><!--[--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/develop/">Разработка</a><!--]--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/admin/">Администрирование</a><!--]--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/design/">Дизайн</a><!--]--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/management/">Менеджмент</a><!--]--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/marketing/">Маркетинг</a><!--]--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/popsci/">Научпоп</a><!--]--><!--]--></nav></div></div><div class="tm-header-user-menu tm-base-layout__user-menu"><a class="tm-header-user-menu__item tm-header-user-menu__search" data-test-id="search-button" href="/ru/search/"><svg class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark" height="24" width="24"><title>Поиск</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#search"></use></svg></a><!-- --><!-- --><div class="tm-header-user-menu__item tm-header-user-menu__write"><div><svg class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_write tm-header-user-menu__icon_dark" height="24" width="24"><title>Написать публикацию</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#write"></use></svg></div><!-- --></div><!--[--><div class="tm-header-user-menu__item"><button class="tm-header-user-menu__toggle" data-test-id="user-menu-settings"><svg class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_dark" height="24" width="24"><title>Настройки</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#page-settings"></use></svg></button></div><a class="tm-header-user-menu__item" href="https://habr.com/kek/v1/auth/habrahabr/?back=/ru/companies/spring_aio/articles/855398/&amp;hl=ru" rel="nofollow"><!--[--><button class="btn btn_solid btn_small tm-header-user-menu__login" type="button"><!--[-->Войти<!--]--></button><!--]--></a><!--]--><!-- --><!--teleport start--><!--teleport end--><!-- --></div></div><!--]--></div></div><!-- --><div class="tm-page-width"><!--[--><!--]--></div><main class="tm-layout__container"><div class="tm-page" companyname="spring_aio" data-async-called="true" hl="ru" style="--0c809c5a:16px;--a086013e:100%;--7c457026:0;"><div class="tm-page-width"><!--[--><div class="tm-page__header"><!--[--><!--]--></div><div class="tm-page__wrapper"><div class="tm-page__main_has-sidebar tm-page__main"><div class="pull-down"><!-- --><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg class="tm-svg-img pull-down__icon pull-down__arrow" height="24" width="24"><title>Обновить</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#pull-arrow"></use></svg></div></div><!--[--><!--[--><div class="tm-article-presenter"><!--[--><!--[--><!-- --><div class="tm-company-profile-card tm-company-article__profile-card"><div class="tm-company-card tm-company-profile-card__info"><div class="tm-company-card__header"><a class="tm-company-card__avatar" href="/ru/companies/spring_aio/profile/"><div class="tm-entity-image"><img alt="" class="tm-entity-image__pic" height="48" src="//habrastorage.org/getpro/habr/company/8f1/91a/458/8f191a4584b8fab12d15af23e447a1d5.png" width="48"/></div></a><!--[--><!-- --><div class="tm-counter-container tm-company-card__rating"><div class="tm-counter-container__header"><!--[--><!--[--><!--]--><div class="tm-votes-lever tm-votes-lever tm-votes-lever_appearance-rating"><!-- --><div class="tm-votes-lever__score tm-votes-lever__score_appearance-rating tm-votes-lever__score"><!--[--><span><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter_rating tm-votes-lever__score-counter" data-test-id="votes-score-counter">77.73</span></span><!--]--></div><!-- --></div><!--]--></div><div class="tm-counter-container__footer"><!--[--><span class="tm-rating__text tm-rating__text">Рейтинг</span><!--]--></div></div><!-- --><!--]--></div><div class="tm-company-card__info"><a class="tm-company-card__name" href="/ru/companies/spring_aio/profile/"><span>Spring АйО</span></a><!-- --></div></div><div class="tm-company-profile-card__buttons"><div class="tm-button-follow tm-company-profile-card__button tm-company-profile-card__button_follow"><!-- --><button class="tm-button-follow__button tm-button-follow__button_big" data-test-id="follow-button" type="button">Подписаться</button></div><!-- --><!-- --><!-- --></div></div><!-- --><!--]--><!--]--><div class="tm-article-presenter__body" data-test-id="article-body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><!--[--><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><!--[--><div class="tm-article-presenter__header"><!--[--><!--]--><div class="tm-article-snippet tm-article-snippet tm-article-presenter__snippet"><!--[--><!--]--><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a class="tm-user-info__userpic" data-test-id="user-info-pic" href="/ru/users/spring_aio/" title="spring_aio"><div class="tm-entity-image"><img alt="" class="tm-entity-image__pic" height="24" src="//habrastorage.org/r/w48/getpro/habr/avatars/8e0/5e8/a1c/8e05e8a1c5fd4560f661efb2cb00e77e.png" width="24"/></div></a><span class="tm-user-info__user tm-user-info__user_appearance-default" data-test-id="user-info-description"><a class="tm-user-info__username" href="/ru/users/spring_aio/">spring_aio <!-- --></a><!--[--><span class="tm-article-datetime-published"><time datetime="2024-11-01T13:45:07.000Z" title="2024-11-01, 16:45">1  ноя  2024 в 16:45</time></span><!--]--></span></span></div><!-- --></div><h1 class="tm-title tm-title_h1" data-test-id="articleTitle" lang="ru"><span>AI и Spring Petclinic: Внедрение ИИ-ассистента с Spring AI (Часть II)</span></h1><div class="tm-article-snippet__stats" data-test-id="articleStats"><div class="tm-article-complexity tm-article-complexity_complexity-low"><span class="tm-svg-icon__wrapper tm-article-complexity__icon"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Уровень сложности</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#complexity-low"></use></svg></span><span class="tm-article-complexity__label">Простой</span></div><div class="tm-article-reading-time"><span class="tm-svg-icon__wrapper tm-article-reading-time__icon"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Время на прочтение</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#clock"></use></svg></span><span class="tm-article-reading-time__label">13 мин</span></div><span class="tm-icon-counter tm-data-icons__item"><svg class="tm-svg-img tm-icon-counter__icon" height="24" width="24"><title>Количество просмотров</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#counter-views"></use></svg><span class="tm-icon-counter__value" title="2100">2.1K</span></span></div><div class="tm-publication-hubs__container" data-test-id="articleHubsList"><div class="tm-publication-hubs"><!--[--><span class="tm-publication-hub__link-container"><a class="tm-publication-hub__link" href="/ru/companies/spring_aio/articles/"><!--[--><span>Блог компании Spring АйО</span><!-- --><!--]--></a></span><span class="tm-publication-hub__link-container"><a class="tm-publication-hub__link" href="/ru/hubs/programming/"><!--[--><span>Программирование</span><span class="tm-article-snippet__profiled-hub" title="Профильный хаб">*</span><!--]--></a></span><span class="tm-publication-hub__link-container"><a class="tm-publication-hub__link" href="/ru/hubs/java/"><!--[--><span>Java</span><span class="tm-article-snippet__profiled-hub" title="Профильный хаб">*</span><!--]--></a></span><span class="tm-publication-hub__link-container"><a class="tm-publication-hub__link" href="/ru/hubs/kotlin/"><!--[--><span>Kotlin</span><span class="tm-article-snippet__profiled-hub" title="Профильный хаб">*</span><!--]--></a></span><!--]--></div></div><div class="tm-article-labels" data-test-id="articleLabels"><div class="tm-article-labels__container"><div class="tm-publication-label tm-publication-label_variant-review"><span>Обзор</span></div><!--[--><div class="tm-publication-label tm-publication-label_variant-translation"><span>Перевод</span></div><!--]--></div></div><!-- --><!-- --></div></div><!--[--><div class="tm-article-presenter__origin"><a class="tm-article-presenter__origin-link" href="https://spring.io/blog/2024/09/27/ai-meets-spring-petclinic-implementing-an-ai-assistant-with-spring-ai-part" target="_blank">Автор оригинала: <span>Oded Shopen</span></a></div><div class="tm-article-body" data-gallery-root="" lang="ru"><div><!--[--><!--]--></div><div id="post-content-body"><div><div class="article-formatted-body article-formatted-body article-formatted-body_version-2"><div xmlns="http://www.w3.org/1999/xhtml"><p>В продолжении статьи автор углубляется в возможности генерации с поддержкой поиска (RAG), чтобы LLM могла учесть некоторую контекстуальную информацию данных, первоначально невходившую в ее обучающую выборку.</p><p>В новом переводе от команды <a href="https://t.me/+QmrKn0wA8CdkNjAy">Spring АйО</a> рассматривается польза Spring AI и векторной БД, благодаря которым система не просто сопоставляет ключевые слова, но и понимает смысловые запросы пользователей, делая взаимодействие с приложением еще более естественным.</p><hr/><h2>Обзор первой части</h2><p>В <a href="https://habr.com/ru/companies/spring_aio/articles/848016/">первой части</a> этой серии статей мы изучили основы интеграции Spring AI с крупными языковыми моделями. Мы рассмотрели создание кастомного ChatClient, использование Function Calling для динамических взаимодействий и доработку промптов, чтобы адаптировать их под потребности проекта Spring Petclinic. К концу первой части у нас был функциональный ИИ-ассистент, способный понимать и обрабатывать запросы, связанные с ветеринарной клиникой.</p><p>Теперь, во второй части, мы пойдем дальше и рассмотрим метод генерации с поддержкой RAG (Retrieval-Augmented Generation) — технику, которая позволяет работать с большими наборами данных, не подходящими для типичного подхода Function Calling. Давайте посмотрим, как RAG может бесшовно интегрировать ИИ со знаниями, специфичными для домена.</p><h2>Retrieval-Augmented Generation (RAG)</h2><p>Хотя вывод списка ветеринаров мог бы быть реализован стандартным способом, я решил использовать этот пример, чтобы продемонстрировать возможности генерации с поддержкой поиска (RAG).</p><p>RAG объединяет крупные языковые модели с реальным извлечением данных, что позволяет создавать более точные и контекстно значимые тексты. Хотя эта концепция связана с нашей предыдущей работой, RAG обычно акцентирует внимание на извлечении данных из векторной БД.</p><p>Векторная БД содержит данные в форме эмбеддингов (<em>embeddings)</em> — числовых представлений, которые передают смысл информации, такой как данные о наших ветеринарах. Эти эмбеддинги хранятся как многомерные векторы, что позволяет эффективно выполнять поиск по смыслу, а не по тексту.</p><p>Например, рассмотрим следующих ветеринаров и их специализации:</p><ul><li><p>Д-р Алиса Браун — Кардиология</p></li><li><p>Д-р Боб Смит — Стоматология</p></li><li><p>Д-р Кэрол Уайт — Дерматология</p></li></ul><p>При обычном поиске запрос «Чистка зубов» не даст точного совпадения. Однако, с семантическим поиском, основанным на эмбеддингах, система поймет, что «Чистка зубов» относится к «Стоматологии». В результате д‑р Боб Смит будет выведен как лучший результат, даже если в запросе прямо не упоминается его специализация. Это показывает, как эмбеддинги улавливают смысл, не ограничиваясь точным совпадением по ключевым словам. Хотя реализация этого процесса выходит за рамки статьи, вы можете узнать больше, посмотрев это <a href="https://youtu.be/eMlx5fFNoYc?si=Lyjb1doyeAt3_EKG">видео на YouTube</a>.</p><p><em>Забавный факт — этот пример был </em><a href="https://chatgpt.com/share/66eef934-696c-8008-9961-93da0740c8f2"><em>сгенерирован самим ChatGPT</em></a><em>.</em></p><p>По сути, поиск по сходству работает путем нахождения ближайших числовых значений запроса по отношению к данным в источнике. Возвращается самое близкое совпадение. Процесс преобразования текста в числовые эмбеддинги также обрабатывается языковой моделью (LLM).</p><h2>Генерация тестовых данных</h2><p>Использование векторной БД наиболее эффективно при обработке значительных объемов данных. Поскольку шесть ветеринаров можно легко обработать за один вызов к языковой модели, я решил увеличить их число до 256. Хотя даже 256 может показаться относительно небольшим объемом, этого достаточно для иллюстрации нашего процесса.</p><p>В данном примере ветеринары могут иметь ноль, одну или две специализации, аналогично оригинальным примерам из Spring Petclinic. Чтобы избежать утомительной задачи создания всех этих тестовых данных вручную, я обратился за помощью к ChatGPT. Он сгенерировал объединенный запрос, который создает 250 ветеринаров и назначает специализации 80% из них:</p><pre><code class="sql">-- Создание списка имен и фамилий
WITH first_names AS (
    SELECT 'James' AS name UNION ALL
    SELECT 'Mary' UNION ALL
    SELECT 'John' UNION ALL
    ...
),
last_names AS (
    SELECT 'Smith' AS name UNION ALL
    SELECT 'Johnson' UNION ALL
    SELECT 'Williams' UNION ALL
    ...
),
random_names AS (
    SELECT
        first_names.name AS first_name,
        last_names.name AS last_name
    FROM
        first_names
    CROSS JOIN
        last_names
    ORDER BY
        RAND()
    LIMIT 250
)
INSERT INTO vets (first_name, last_name)
SELECT first_name, last_name FROM random_names;

-- Добавление специализаций для 80% ветеринаров
WITH vet_ids AS (
    SELECT id
    FROM vets
    ORDER BY RAND()
    LIMIT 200  -- 80% of 250
),
specialties AS (
    SELECT id
    FROM specialties
),
random_specialties AS (
    SELECT 
        vet_ids.id AS vet_id,
        specialties.id AS specialty_id
    FROM 
        vet_ids
    CROSS JOIN 
        specialties
    ORDER BY 
        RAND()
    LIMIT 300 -- В среднем 2 специализации на одного ветеринара

)
INSERT INTO vet_specialties (vet_id, specialty_id)
SELECT 
    vet_id,
    specialty_id
FROM (
    SELECT 
        vet_id,
        specialty_id,
        ROW_NUMBER() OVER (PARTITION BY vet_id ORDER BY RAND()) AS rn
    FROM 
        random_specialties
) tmp
WHERE 
    rn &lt;= 2;  -- Назначить не более 2 специализаций на одного ветеринара

-- Оставшиеся 20% ветеринаров не будут иметь специализаций, поэтому дополнительные команды вставки не требуются
</code></pre><p>Чтобы гарантировать, что мои данные остаются статичными и последовательными при каждом запуске, я экспортировал соответствующие таблицы из базы данных H2 в виде жестко заданных команд вставки (<code>INSERT</code>). Эти команды были добавлены в файл <code>data.sql</code>:</p><pre><code class="sql">INSERT INTO vets VALUES (default, 'James', 'Carter');
INSERT INTO vets VALUES (default, 'Helen', 'Leary');
INSERT INTO vets VALUES (default, 'Linda', 'Douglas');
INSERT INTO vets VALUES (default, 'Rafael', 'Ortega');
INSERT INTO vets VALUES (default, 'Henry', 'Stevens');
INSERT INTO vets VALUES (default, 'Sharon', 'Jenkins');
INSERT INTO vets VALUES (default, 'Matthew', 'Alexander');
INSERT INTO vets VALUES (default, 'Alice', 'Anderson');
INSERT INTO vets VALUES (default, 'James', 'Rogers');
INSERT INTO vets VALUES (default, 'Lauren', 'Butler');
INSERT INTO vets VALUES (default, 'Cheryl', 'Rodriguez');
...
...
-- Всего 256 ветеринаров 

-- Сначала убедимся, что у нас есть 5 специализаций
INSERT INTO specialties (name) VALUES ('radiology');
INSERT INTO specialties (name) VALUES ('surgery');
INSERT INTO specialties (name) VALUES ('dentistry');
INSERT INTO specialties (name) VALUES ('cardiology');
INSERT INTO specialties (name) VALUES ('anesthesia');

INSERT INTO vet_specialties VALUES ('220', '2');
INSERT INTO vet_specialties VALUES ('131', '1');
INSERT INTO vet_specialties VALUES ('58', '3');
INSERT INTO vet_specialties VALUES ('43', '4');
INSERT INTO vet_specialties VALUES ('110', '3');
INSERT INTO vet_specialties VALUES ('63', '5');
INSERT INTO vet_specialties VALUES ('206', '4');
INSERT INTO vet_specialties VALUES ('29', '3');
INSERT INTO vet_specialties VALUES ('189', '3');
...
…
</code></pre><h2>Внедрение тестовых данных</h2><p>Для реализации векторной БД у нас есть несколько вариантов. Наиболее популярным выбором, вероятно, является Postgres с расширением pgVector. Greenplum — масштабируемая параллельная база данных на основе Postgres — также поддерживает pgVector. В <a href="https://docs.spring.io/spring-ai/reference/api/vectordbs.html">справочной документации</a> Spring AI перечислены поддерживаемые на данный момент векторные БД.</p><p>Для нашего простого случая я выбрал предоставленный Spring AI класс <code>SimpleVectorStore</code>. Этот класс реализует векторную БД с использованием простой <code>Java ConcurrentHashMap</code>, чего более чем достаточно для нашего небольшого набора данных из 256 ветеринаров. Конфигурация для этого хранилища, а также реализация памяти чата, определены в классе <code>AIBeanConfiguration</code>, аннотированном <code>@Configuration</code>:</p><pre><code class="java">@Configuration
@Profile("openai")
public class AIBeanConfiguration {

	@Bean
	public ChatMemory chatMemory() {
		return new InMemoryChatMemory();
	}

	@Bean
	VectorStore vectorStore(EmbeddingModel embeddingModel) {
		return new SimpleVectorStore(embeddingModel);
	}

}</code></pre><p>Векторная БД должна включать данные о ветеринарах сразу после запуска приложения. Для этого я добавил бин <code>VectorStoreController</code>, который содержит аннотированный метод <code>@EventListener</code>, отслеживающий событие <code>ApplicationStartedEvent</code>. Этот метод автоматически вызывается Spring`ом сразу после запуска приложения, что гарантирует добавление данных о ветеринарах в векторную БД в нужный момент:</p><pre><code class="java">@EventListener
public void loadVetDataToVectorStoreOnStartup(ApplicationStartedEvent event) throws IOException {
    // Извлекает все сущности Vet и создает документ для каждого ветеринара
    Pageable pageable = PageRequest.of(0, Integer.MAX_VALUE);
    Page&lt;Vet&gt; vetsPage = vetRepository.findAll(pageable);
    Resource vetsAsJson = convertListToJsonResource(vetsPage.getContent());
    DocumentReader reader = new JsonReader(vetsAsJson);
    List&lt;Document&gt; documents = reader.get();

    // добавляет документы в векторную БД
    this.vectorStore.add(documents);

    if (vectorStore instanceof SimpleVectorStore) {
        var file = File.createTempFile("vectorstore", ".json");
        ((SimpleVectorStore) this.vectorStore).save(file);
        logger.info("vector store contents written to {}", file.getAbsolutePath());
    }
    logger.info("vector store loaded with {} documents", documents.size());
}

public Resource convertListToJsonResource(List&lt;Vet&gt; vets) {
    ObjectMapper objectMapper = new ObjectMapper();
    try {
        // Convert List&lt;Vet&gt; to JSON string
        String json = objectMapper.writeValueAsString(vets);
        // Convert JSON string to byte array
        byte[] jsonBytes = json.getBytes();
        // Create a ByteArrayResource from the byte array
        return new ByteArrayResource(jsonBytes);
    }
    catch (JsonProcessingException e) {
        e.printStackTrace();
        return null;
    }
}</code></pre><p>Здесь достаточно много нюансов, поэтому разберем код пошагово:</p><ol><li><p>Как и в методе <code>listOwners</code>, мы начинаем с извлечения всех ветеринаров из базы данных.</p></li><li><p>Spring AI добавляет в векторную БД сущности типа <code>Document</code>. <code>Document</code> представляет собой числовые данные эмбеддингов вместе с оригинальным, читаемым текстом. Такое двойное представление позволяет коду сопоставлять связи между встроенными векторами и изначальным текстом.</p></li><li><p>Чтобы создать эти сущности <code>Document</code>, нам нужно преобразовать наши сущности <code>Vet</code> в текстовый формат. Spring AI предоставляет два встроенных readers для этой цели: <code>JsonReader</code> и <code>TextReader</code>. Так как наши сущности <code>Vet</code> имеют структурированный формат, имеет смысл представить их в виде JSON. Для этого мы используем вспомогательный метод <code>convertListToJsonResource</code>, который с помощью парсера Jackson преобразует список ветеринаров в JSON-ресурс, загружаемый в память.</p></li><li><p>Затем мы вызываем метод <code>add(documents)</code> для векторной БД. Этот метод отвечает за добавление данных, поочередно обрабатывая каждый документ (наших ветеринаров в формате JSON) и встраивая его, связывая с оригинальными метаданными.</p></li><li><p>Хотя это и не обязательно, мы также создаем файл <code>vectorstore.json</code>, который представляет текущее состояние нашей базы данных <code>SimpleVectorStore</code>. Этот файл позволяет нам увидеть, как Spring AI интерпретирует сохраненные данные «за кулисами». Давайте посмотрим на сгенерированный файл, чтобы понять, что именно видит Spring AI.</p></li></ol><pre><code class="json">{
  "dd919c71-06bb-4777-b974-120dfee8b9f9" : {
    "embedding" : [ 0.013877872, 0.03598228, 0.008212427, 0.00917901, -0.036433823, 0.03253927, -0.018089917, -0.0030867155, -0.0017038669, -0.048145704, 0.008974405, 0.017624263, 0.017539598, -4.7888185E-4, 0.013842596, -0.0028221398, 0.033414137, -0.02847539, -0.0066955267, -0.021885695, -0.0072387885, 0.01673529, -0.007386951, 0.014661016, -0.015380662, 0.016184973, 0.00787377, -0.019881975, -0.0028785826, -0.023875304, 0.024778388, -0.02357898, -0.023748307, -0.043094076, -0.029322032, ... ],
    "content" : "{id=31, firstName=Samantha, lastName=Walker, new=false, specialties=[{id=2, name=surgery, new=false}]}",
    "id" : "dd919c71-06bb-4777-b974-120dfee8b9f9",
    "metadata" : { },
    "media" : [ ]
  },
  "4f9aabed-c15c-43f6-9dbc-46ed9a18e176" : {
    "embedding" : [ 0.01051745, 0.032714732, 0.007800559, -0.0020621764, -0.03240663, 0.025530376, 0.0037602335, -0.0023702774, -0.004978633, -0.037364256, 0.0012831709, 0.032742742, 0.005430281, 0.00847278, -0.004285406, 0.01146276, 0.03036196, -0.029941821, 0.013220336, -0.03207052, -7.518716E-4, 0.016665466, -0.0052062077, 0.010678503, 0.0026591222, 0.0091940155, ... ],
    "content" : "{id=195, firstName=Shirley, lastName=Martinez, new=false, specialties=[{id=1, name=radiology, new=false}, {id=2, name=surgery, new=false}]}",
    "id" : "4f9aabed-c15c-43f6-9dbc-46ed9a18e176",
    "metadata" : { },
    "media" : [ ]
  },
  "55b13970-cd55-476b-b7c9-62337855ae0a" : {
    "embedding" : [ -0.0031563698, 0.03546827, 0.018778138, -0.01324492, -0.020253662, 0.027756566, 0.007182742, -0.008637386, -0.0075725033, -0.025543278, 5.850768E-4, 0.02568248, 0.0140383635, -0.017330453, 0.003935892, ... ],
    "content" : "{id=19, firstName=Jacqueline, lastName=Ross, new=false, specialties=[{id=4, name=cardiology, new=false}]}",
    "id" : "55b13970-cd55-476b-b7c9-62337855ae0a",
    "metadata" : { },
    "media" : [ ]
  },
...
...
...</code></pre><p>Очень здорово! У нас есть ветеринар в формате JSON, рядом с набором чисел, которые, возможно, не имеют для нас особого смысла, но весьма значимы для языковой модели. Эти числа представляют собой данные эмбеддингов, которые модель использует для понимания связей и семантики сущности <code>Vet</code> на уровне, значительно превышающем простое сопоставление текста.</p><h2>Оптимизация затрат и ускорение запуска</h2><p>Если запускать этот метод векторизации данных при каждом перезапуске приложения, это приведет к двум значительным недостаткам:</p><ul><li><p><strong>Долгое время запуска</strong>: каждый JSON-документ с данными о ветеринаре придется повторно встраивать, отправляя запросы к языковой модели, что негативно повлияет на загрузку приложения.</p></li><li><p><strong>Повышенные затраты</strong>: векторизация 256 документов потребует отправки 256 запросов к языковой модели при каждом запуске, что приведет к дополнительной тарификации.</p></li></ul><p>Эмбеддинги лучше всего подходят для процессов ETL (Extract, Transform, Load) или потоковой обработки, которые выполняются независимо от основного веб-приложения. Эти процессы могут выполнять векторизацию в фоновом режиме, не влияя на user experience и избегая лишних затрат.</p><p>Чтобы упростить задачу в Spring Petclinic, я решил загружать заранее подготовленную векторную БД при запуске. Этот подход обеспечивает мгновенную загрузку и исключает дополнительные расходы на LLM. Вот, как я добавил это в метод, чтобы достичь такой оптимизации:</p><pre><code class="java">@EventListener
public void loadVetDataToVectorStoreOnStartup(ApplicationStartedEvent event) throws IOException {
    Resource resource = new ClassPathResource("vectorstore.json");
    // Проверка существования файла
    if (resource.exists()) {
        // Чтобы сэкономить кредиты на ИИ, используем pre-embedded базу данных, которая была сохранена
        // на диск на основе текущих данных в файле h2 data.sql
        File file = resource.getFile();
        ((SimpleVectorStore) this.vectorStore).load(file);
        logger.info("vector store loaded from existing vectorstore.json file in the classpath");
        return;
    }

    // Остальная часть метода остается прежней
    ...
    ...
}</code></pre><p>Файл <code>vectorstore.json</code> расположен в каталоге <code>src/main/resources</code>, что гарантирует, что приложение всегда будет загружать заранее подготовленную векторную БД при запуске, а не создавать её заново. Если нам потребуется обновить векторную БД, мы можем просто удалить существующий файл <code>vectorstore.json</code> и перезапустить приложение. После того как новая БД будет создано, мы можем поместить обновленный файл <code>vectorstore.json</code> обратно в <code>src/main/resources</code>. Такой подход обеспечивает гибкость, избегая ненужной повторной векторизации данных при регулярных перезапусках.</p><h2>Реализация поиска по сходству</h2><p>Теперь, когда наша векторная БД готова, реализация функции <code>listVets</code> становится простой. Функция определяется следующим образом:</p><pre><code class="java">@Bean
@Description("Список ветеринаров, работающих в клинике для животных")
public Function&lt;VetRequest, VetResponse&gt; listVets(AIDataProvider petclinicAiProvider) {
    return request -&gt; {
        try {
            return petclinicAiProvider.getVets(request);
        }
        catch (JsonProcessingException e) {
            e.printStackTrace();
            return null;
        }
    };
}
record VetResponse(List&lt;String&gt; vet) {
};

record VetRequest(Vet vet) {
}</code></pre><p>Вот реализация в <code>AIDataProvider</code>:</p><pre><code class="java">public VetResponse getVets(VetRequest request) throws JsonProcessingException {
    ObjectMapper objectMapper = new ObjectMapper();
    String vetAsJson = objectMapper.writeValueAsString(request.vet());
    SearchRequest sr = SearchRequest.from(SearchRequest.defaults()).withQuery(vetAsJson).withTopK(20);
    if (request.vet() == null) {
        // Provide a limit of 50 results when zero parameters are sent
        sr = sr.withTopK(50);
    }
    List&lt;Document&gt; topMatches = this.vectorStore.similaritySearch(sr);
    List&lt;String&gt; results = topMatches.stream().map(document -&gt; document.getContent()).toList();
    return new VetResponse(results);
}</code></pre><p>Давайте рассмотрим, что мы сделали:</p><ol><li><p>Мы начинаем с сущности <code>Vet</code> из запроса. Поскольку записи в нашей векторной БД представлены в формате JSON, первым шагом является преобразование сущности <code>Vet</code> также в JSON.</p></li><li><p>Затем мы создаем <code>SearchRequest</code>, который передается в метод <code>similaritySearch</code> векторной БД. <code>SearchRequest</code> позволяет настроить поиск в зависимости от наших конкретных потребностей. В данном случае мы в основном используем параметры по умолчанию, за исключением параметра <code>topK</code>, который определяет количество возвращаемых результатов. По умолчанию это значение установлено на 4, но в нашем случае мы увеличиваем его до 20, чтобы обрабатывать более широкие запросы, такие как «Сколько ветеринаров специализируются на кардиологии?»</p></li><li><p>Если в запросе не указаны фильтры (то есть сущность <code>Vet</code> пуста), мы увеличиваем значение <code>topK</code> до 50. Это позволяет нам возвращать до 50 ветеринаров для таких запросов, как «показать список ветеринаров клиники». Конечно, это будет не весь список, ведь мы хотели бы избежать перегрузки LLM избыточными данными. Тем не менее, это должно быть оптимально, так как мы постарались тщательно настроить системный текст для обработки подобных случаев:</p><p><em>При работе с ветеринарами, если пользователь не уверен в полученных результатах, объясните, что может существовать дополнительная информация, которая не была возвращена. Только если пользователь спрашивает об общем количестве всех ветеринаров, ответьте, что их много, и запросите дополнительные критерии. Для владельцев, питомцев иливизитов — предоставьте точные данные.</em></p></li><li><p>Последним шагом является вызов метода <code>similaritySearch</code>. Затем мы преобразуем <code>getContent()</code> каждого возвращенного результата, так как именно он содержит фактические данные JSON о ветеринарах, а не встроенные данные эмбеддингов.</p></li></ol><p>Далее все идет как обычно. Языковая модель завершает вызов функции, получает результаты и определяет наилучший способ отображения данных в чате.</p><p>Давайте посмотрим, как это работает на практике:</p><figure class=""><img data-src="https://habrastorage.org/getpro/habr/upload_files/d09/6f2/975/d096f29757e823c68606238ab001872a.png" height="609" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/d09/6f2/975/d096f29757e823c68606238ab001872a.png" width="409"/></figure><p>Похоже, наш системный текст работает как ожидается, предотвращая любую перегрузку. Теперь давайте попробуем указать некоторые конкретные критерии:</p><figure class=""><img data-src="https://habrastorage.org/getpro/habr/upload_files/5a2/89b/eee/5a289beee38a29ccbf6e0f76c27506b8.png" height="616" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/5a2/89b/eee/5a289beee38a29ccbf6e0f76c27506b8.png" width="412"/></figure><p>Данные, возвращенные от языковой модели, именно такие, как мы ожидали. Давайте попробуем задать более общий вопрос:</p><figure class=""><img data-src="https://habrastorage.org/getpro/habr/upload_files/d88/042/9ac/d880429acbd8105fae95216708124fc0.png" height="611" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/d88/042/9ac/d880429acbd8105fae95216708124fc0.png" width="410"/></figure><p>Языковая модель успешно определила как минимум 20 ветеринаров, специализирующихся на кардиологии, соблюдая установленный нами верхний предел <code>topK(20)</code>. Однако, если есть неопределенность в результатах, модель отмечает, что могут быть доступны дополнительные ветеринары, как указано в нашем системном тексте.</p><h2>Реализация пользовательского интерфейса</h2><p>Создание интерфейса для чат-бота включает работу с Thymeleaf, JavaScript, CSS и препроцессором SCSS.</p><p>После анализа кода я решил разместить чат-бота в месте, доступном с любой вкладки, что делает layout.html идеальным выбором.</p><p>Во время обсуждения PR с доктором Дейвом Сайером я понял, что не следует изменять файл petclinic.css напрямую, так как Spring Petclinic использует SCSS-препроцессор для генерации CSS-файла.</p><p>Признаюсь, я в основном backend-разработчик, специализирующийся на Spring, облачной архитектуре, Kubernetes и Cloud Foundry. У меня есть некоторый опыт работы с Angular, но я не являюсь экспертом в разработке фронтенда. Вероятно, я мог бы что-то создать, но это вряд ли выглядело бы профессионально.</p><p>К счастью, у меня был отличный партнер для парного программирования — ChatGPT. Если вам интересно, как я разработал код для интерфейса, вы можете ознакомиться с <a href="https://chatgpt.com/share/8c7accc2-8939-4fd6-8090-6abbb9d4e4cc">этой сессией ChatGPT</a>. Удивительно, сколько можно узнать, сотрудничая с большими языковыми моделями в упражнениях по кодированию. Просто помните, что всегда следует тщательно проверять предложенные решения, а не копировать их вслепую.</p><h2>Заключение</h2><p>После нескольких месяцев работы со Spring AI я по-настоящему оценил вложенные в проект мысли и усилия. Spring AI действительно уникален, так как позволяет разработчикам изучать мир ИИ, не требуя от них освоения нового языка, такого как Python. Более того, этот опыт подчеркивает еще одно важное преимущество: ваш код с ИИ может сосуществовать в том же коде, что и ваша бизнес-логика. Вы можете легко расширить старую кодовую базу возможностями ИИ, добавив всего несколько дополнительных классов. Способность избегать необходимости перестраивать все ваши данные с нуля в новом приложении, специально ориентированном на ИИ, значительно повышает производительность. Даже такие простые функции, как автоматическое завершение кода для существующих сущностей JPA в IDE, вносят огромный вклад.</p><p>Spring AI имеет потенциал существенно улучшить приложения на базе Spring, упрощая интеграцию возможностей ИИ. Он дает разработчикам возможность использовать модели машинного обучения и сервисы на основе ИИ без необходимости глубоких знаний в области науки о данных. Абстрагируя сложные операции ИИ и встраивая их непосредственно в привычные фреймворки Spring, разработчики могут сосредоточиться на быстром создании интеллектуальных, управляемых данными функций. Этот бесшовный союз ИИ и Spring создает среду, где инновации не ограничиваются техническими барьерами, открывая новые возможности для разработки более умных и адаптивных приложений.</p><figure class="full-width"><img data-src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/725/c0c/ddb/725c0cddbe78ce9d7a9dd868c3632ad6.png" height="334" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/725/c0c/ddb/725c0cddbe78ce9d7a9dd868c3632ad6.png" width="1560"/></figure><p>Присоединяйтесь к русскоязычному сообществу разработчиков на Spring Boot в телеграм — <a href="https://t.me/+oBwACbkvJ19iODAy">Spring АйО</a>, чтобы быть в курсе последних новостей из мира разработки на Spring Boot и всего, что с ним связано.</p><p>Ждем всех, <a href="https://t.me/+oBwACbkvJ19iODAy">присоединяйтесь</a></p><p></p></div></div></div><!-- --><!-- --></div><!-- --><!-- --></div><!--]--><!-- --><div class="tm-article-presenter__meta" data-test-id="article-meta-links"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span><ul class="tm-separated-list__list"><!--[--><li class="tm-separated-list__item"><!--[--><a class="tm-tags-list__link" href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=[java]"><span>java</span></a><!--]--></li><li class="tm-separated-list__item"><!--[--><a class="tm-tags-list__link" href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=[kotlin]"><span>kotlin</span></a><!--]--></li><li class="tm-separated-list__item"><!--[--><a class="tm-tags-list__link" href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=[spring]"><span>spring</span></a><!--]--></li><li class="tm-separated-list__item"><!--[--><a class="tm-tags-list__link" href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=[spring+boot]"><span>spring boot</span></a><!--]--></li><li class="tm-separated-list__item"><!--[--><a class="tm-tags-list__link" href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=[spring-ai]"><span>spring-ai</span></a><!--]--></li><!--]--><!-- --></ul></div><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span><ul class="tm-separated-list__list"><!--[--><li class="tm-separated-list__item"><!--[--><a class="tm-hubs-list__link" href="/ru/companies/spring_aio/articles/"><!--[--><span>Блог компании Spring АйО</span><!--]--></a><!--]--></li><li class="tm-separated-list__item"><!--[--><a class="tm-hubs-list__link" href="/ru/hubs/programming/"><!--[--><span>Программирование</span><!--]--></a><!--]--></li><li class="tm-separated-list__item"><!--[--><a class="tm-hubs-list__link" href="/ru/hubs/java/"><!--[--><span>Java</span><!--]--></a><!--]--></li><li class="tm-separated-list__item"><!--[--><a class="tm-hubs-list__link" href="/ru/hubs/kotlin/"><!--[--><span>Kotlin</span><!--]--></a><!--]--></li><!--]--><!-- --></ul></div></div><!-- --><!--]--></article><!--]--></div><!-- --></div><div class="tm-article-sticky-panel" data-test-id="article-sticky-panel" style=""><div class="tm-data-icons tm-data-icons tm-data-icons_space-big tm-article-sticky-panel__icons" data-test-id="article-stats-icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon tm-votes-meter__icon_appearance-article" height="24" width="24"><title>Всего голосов 6: ↑6 и ↓0</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#counter-rating"></use></svg><span class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_appearance-article tm-votes-meter__value_rating tm-votes-meter__value" data-test-id="votes-meter-value" title="Всего голосов 6: ↑6 и ↓0">+8</span></div><!--teleport start--><!--teleport end--><!-- --></div><!-- --><!-- --><button class="bookmarks-button tm-data-icons__item" title="Добавить в закладки" type="button"><span class="tm-svg-icon__wrapper bookmarks-button__icon"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Добавить в закладки</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#counter-favorite"></use></svg></span><span class="bookmarks-button__counter" title="Количество пользователей, добавивших публикацию в закладки">15</span></button><div class="tm-sharing tm-data-icons__item" title="Поделиться"><button class="tm-sharing__button" type="button"><svg class="tm-sharing__icon" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13.8 13.8V18l7.2-6.6L13.8 5v3.9C5 8.9 3 18.6 3 18.6c2.5-4.4 6-4.8 10.8-4.8z" fill="currentColor"></path></svg></button><!--teleport start--><!--teleport end--></div><div class="tm-article-comments-counter-link tm-data-icons__item" title="Читать комментарии"><a class="tm-article-comments-counter-link__link" data-test-id="counter-comments" href="/ru/companies/spring_aio/articles/855398/comments/"><!--[--><svg class="tm-svg-img tm-article-comments-counter-link__icon" height="24" width="24"><title>Комментарии</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#counter-comments"></use></svg><span class="tm-article-comments-counter-link__value">2</span><!--]--></a><!-- --></div><!--[--><!--[--><!--[--><!-- --><!--]--><!--]--><!--]--><!--teleport start--><!--teleport end--><!-- --></div></div></div><!--[--><!--]--><div class="tm-article-presenter__footer"><!--[--><!--[--><div class="tm-article-blocks"><!-- --><!--[--><section class="tm-block tm-block tm-block_spacing-bottom"><!-- --><!--[--><div class="tm-block__body tm-block__body tm-block__body_variant-balanced"><!--[--><div class="tm-article-author" data-test-id="article-author-info"><!--[--><!--[--><div class="tm-article-author__company"><div class="tm-article-author__company-card"><div class="tm-company-snippet"><a class="tm-company-snippet__logo-link" href="/ru/companies/spring_aio/profile/"><div class="tm-entity-image"><img alt="" class="tm-entity-image__pic" height="40" src="//habrastorage.org/getpro/habr/company/8f1/91a/458/8f191a4584b8fab12d15af23e447a1d5.png" width="40"/></div></a><div class="tm-company-snippet__info"><a class="tm-company-snippet__title" data-test-id="company-title" href="/ru/companies/spring_aio/profile/"><span>Spring АйО</span></a><div class="tm-company-snippet__description">Компания</div></div></div><div class="tm-article-author__buttons"><!-- --><!-- --></div></div><div class="tm-article-author__company-contacts"><!--[--><a class="tm-article-author__contact" href="https://telegram.me/spring_aio" rel="noopener" target="_blank">Telegram</a><a class="tm-article-author__contact" href="https://www.springnow.ru" rel="noopener" target="_blank">Сайт</a><!--]--></div><div class="tm-article-author__separator"></div></div><!--]--><!--]--><div class="tm-user-card tm-user-card tm-user-card_variant-article tm-article-author__user-card" data-async-called="true"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a class="tm-user-card__userpic tm-user-card__userpic_size-40" href="/ru/users/spring_aio/"><div class="tm-entity-image"><img alt="" class="tm-entity-image__pic" src="//habrastorage.org/getpro/habr/avatars/8e0/5e8/a1c/8e05e8a1c5fd4560f661efb2cb00e77e.png"/></div></a><div class="tm-user-card__meta"><div class="tm-counter-container tm-karma tm-karma" title=" 85 голосов "><div class="tm-counter-container__header"><!--[--><div class="karma-display positive" data-v-7635202e="">45</div><!-- --><!--]--></div><div class="tm-counter-container__footer"><!--[--><div class="tm-karma__text">Карма</div><!--teleport start--><!--teleport end--><!--]--></div></div><div class="tm-counter-container" title="Рейтинг пользователя"><div class="tm-counter-container__header"><!--[--><!--[--><!--]--><div class="tm-votes-lever tm-votes-lever tm-votes-lever_appearance-rating"><!-- --><div class="tm-votes-lever__score tm-votes-lever__score_appearance-rating tm-votes-lever__score_no-margin tm-votes-lever__score"><!--[--><span><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter_rating tm-votes-lever__score-counter" data-test-id="votes-score-counter">105.9</span></span><!--]--></div><!-- --></div><!--]--></div><div class="tm-counter-container__footer"><!--[--><span class="tm-rating__text tm-rating__text">Рейтинг</span><!--]--></div></div></div></div></div><div class="tm-user-card__info tm-user-card__info_variant-article tm-user-card__info"><div class="tm-user-card__title tm-user-card__title_variant-article tm-user-card__title"><span class="tm-user-card__name tm-user-card__name_variant-article tm-user-card__name">Spring АйО</span><a class="tm-user-card__nickname tm-user-card__nickname tm-user-card__nickname_variant-article" href="/ru/users/spring_aio/"> @spring_aio</a><!-- --></div><p class="tm-user-card__short-info tm-user-card__short-info_variant-article tm-user-card__short-info" data-test-id="user-card-speciality">Главный по Spring</p></div></div><div class="tm-user-card__buttons tm-user-card__buttons_variant-article tm-user-card__buttons"><!-- --><div class="tm-user-card__button"><div class="tm-button-follow tm-user-card__button-follow"><!-- --><button class="tm-button-follow__button tm-button-follow__button_big" data-test-id="follow-button" type="button">Подписаться</button></div></div><!-- --><div class="tm-user-card__button tm-user-card__button_write" data-test-id="user-card-conversations"><svg class="tm-svg-img tm-user-card__button-icon" height="16" width="16"><title>Отправить сообщение</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#mail"></use></svg></div><!-- --></div><!-- --></div><!-- --></div><!--]--></div><!--]--><!-- --></section><!-- --><!--[--><!--]--><!--]--><div class="tm-article-blocks__comments"><div class="tm-article-page-comments" id="publication-comments"><div><!--[--><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style" data-test-id="counter-comments" href="/ru/companies/spring_aio/articles/855398/comments/"><!--[--><svg class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted" height="24" width="24"><title>Комментарии</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#counter-comments"></use></svg><span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted"> Комментарии 2 </span><!--]--></a><!-- --></div><!--]--></div></div></div><!--[--><!--[--><!--]--><section class="tm-block tm-block tm-block_spacing-bottom"><header class="tm-block__header tm-block__header tm-block__header_variant-borderless"><div class="tm-block__header-container"><h2 class="tm-block__title tm-block__title tm-block__title_variant-large">Публикации</h2><!--[--><!--]--></div><!-- --></header><!--[--><div class="tm-block__body tm-block__body tm-block__body_variant-condensed-slim"><!--[--><!--[--><div class="tm-tabs tm-tabs"><div class=""><!--[--><span class="tm-tabs__tab-item"><button class="tm-tabs__tab-link tm-tabs__tab-link_active tm-tabs__tab-link_slim tm-tabs__tab-link">Лучшие за сутки</button></span><span class="tm-tabs__tab-item"><button class="tm-tabs__tab-link tm-tabs__tab-link_slim tm-tabs__tab-link">Похожие</button></span><!--]--></div><!-- --></div><div class="similar-and-daily__tab-view"><div class="placeholder-wrapper"><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><div class="tm-placeholder-article-cards"><!--[--><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div><div class="tm-placeholder__user-date loads"></div></div><div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div><div class="tm-placeholder-article-card__icons tm-placeholder__counters"><!--[--><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><!--]--></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div><div class="tm-placeholder__user-date loads"></div></div><div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div><div class="tm-placeholder-article-card__icons tm-placeholder__counters"><!--[--><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><!--]--></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div><div class="tm-placeholder__user-date loads"></div></div><div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div><div class="tm-placeholder-article-card__icons tm-placeholder__counters"><!--[--><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><!--]--></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div><div class="tm-placeholder__user-date loads"></div></div><div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div><div class="tm-placeholder-article-card__icons tm-placeholder__counters"><!--[--><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><!--]--></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div><div class="tm-placeholder__user-date loads"></div></div><div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div><div class="tm-placeholder-article-card__icons tm-placeholder__counters"><!--[--><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><!--]--></div></div><!--]--></div><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --></div><!-- --></div><!--]--><!--]--></div><!--]--><!-- --></section><!--[--><!--]--><!-- --><!--[--><!--]--><!--]--></div><!--]--><!--]--></div></div><!--]--><!--]--></div></div><div class="tm-page__sidebar"><!--[--><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__placeholder_initial"></div><div class="tm-sexy-sidebar_initial tm-sexy-sidebar" style="margin-top:0px;"><!--[--><!--]--><!-- --><div class="tm-layout-sidebar__placeholder_initial"></div><!--[--><section class="tm-block tm-block tm-block_spacing-bottom"><header class="tm-block__header tm-block__header"><div class="tm-block__header-container"><h2 class="tm-block__title tm-block__title">Информация</h2><!--[--><!--]--></div><!-- --></header><!--[--><div class="tm-block__body tm-block__body"><!--[--><div class="tm-company-basic-info"><dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap tm-description-list__title">Сайт</dt><dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap tm-description-list__body"><!--[--><a class="tm-company-basic-info__link" href="https://t.me/spring_aio" target="_blank">t.me</a><!--]--></dd></dl><dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap tm-description-list__title">Дата регистрации</dt><dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap tm-description-list__body"><!--[--><time datetime="2024-05-27T07:08:22.000Z" title="2024-05-27, 10:08">27  мая  2024</time><!--]--></dd></dl><!-- --><dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap tm-description-list__title">Численность</dt><dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap tm-description-list__body"><!--[-->11–30 человек<!--]--></dd></dl><!-- --><!-- --></div><!--]--></div><!--]--><!-- --></section><div class="tm-company-widgets"><!--[--><!--]--></div><!-- --><!-- --><!--]--><!-- --></div></div><!--]--></div></div><!-- --><!--]--></div></div></main><!-- --></div><div class="tm-footer-menu"><div class="tm-page-width"><!--[--><div class="tm-footer-menu__container"><!--[--><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">Ваш аккаунт</p><div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><!--[--><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/companies/spring_aio/articles/855398/&amp;hl=ru" rel="nofollow" target="_self">Войти</a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/companies/spring_aio/articles/855398/&amp;hl=ru" rel="nofollow" target="_self">Регистрация</a></li><!--]--></ul></div></div><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">Разделы</p><div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><!--[--><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/articles/">Статьи</a></li><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/news/">Новости</a></li><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/hubs/">Хабы</a></li><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/companies/">Компании</a></li><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/users/">Авторы</a></li><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/sandbox/">Песочница</a></li><!--]--></ul></div></div><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">Информация</p><div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><!--[--><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/docs/help/">Устройство сайта</a></li><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/docs/authors/codex/">Для авторов</a></li><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/docs/companies/corpblogs/">Для компаний</a></li><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/docs/docs/transparency/">Документы</a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement/?hl=ru_RU" target="_blank">Соглашение</a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/?hl=ru_RU" target="_blank">Конфиденциальность</a></li><!--]--></ul></div></div><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">Услуги</p><div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><!--[--><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/corporate-blogs/" target="_blank">Корпоративный блог</a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/advertising/" target="_blank">Медийная реклама</a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/native-special/" target="_blank">Нативные проекты</a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/education-programs/" target="_blank">Образовательные программы</a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/hello-startup/" target="_blank">Стартапам</a></li><!--]--></ul></div></div><!--]--></div><!--]--></div></div><div class="tm-footer"><div class="tm-page-width"><!--[--><div class="tm-footer__container"><!-- --><div class="tm-footer__social"><!--[--><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Facebook</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Twitter</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>VK</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-vk"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Telegram</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Youtube</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://dzen.ru/habr" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Яндекс Дзен</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-dzen"></use></svg></a><!--]--></div><!--teleport start--><!--teleport end--><button class="tm-footer__link"><!-- --> Настройка языка</button><a class="tm-footer__link" href="/ru/feedback/">Техническая поддержка</a><div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2025, </span><span class="tm-copyright__name"><a class="tm-copyright__link" href="https://company.habr.com/" rel="noopener" target="_blank">Habr</a></span></span></div></div><!--]--></div></div><!-- --><!--]--></div><!-- --></div></div>
<div id="overlays"><!-- --><!--teleport anchor--><!-- --><!--teleport anchor--><!-- --><!--teleport anchor--><!-- --><!--teleport anchor--><!-- --><!--teleport anchor--><!-- --><!--teleport anchor--></div>
</body>
</html>
