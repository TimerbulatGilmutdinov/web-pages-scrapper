<!DOCTYPE html>

<html lang="ru">
<head>
<title>Kotlin Coroutines. Часть 1: Первое погружение / Хабр</title>
</head>
<body>
<div id="mount"><div data-async-called="true" id="app"><div class="tm-layout__wrapper"><!--[--><!-- --><div></div><!-- --><header class="tm-header" data-test-id="header"><div class="tm-page-width"><!--[--><div class="tm-header__container"><!-- --><span class="tm-header__logo-wrap"><a class="tm-header__logo tm-header__logo_hl-ru tm-header__logo" href="/ru/"><svg class="tm-svg-img tm-header__icon" height="16" width="16"><title>Хабр</title><use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a><span class="tm-header__beta-sign" style="display:none;">β</span></span><!--[--><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><!--[--><button class="tm-header__dropdown-toggle"><svg class="tm-svg-img tm-header__icon tm-header__icon_dropdown" height="16" width="16"><title>Открыть список</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#arrow-down"></use></svg></button><!--]--></div><!-- --></div><a class="tm-header__become-author-btn" href="/ru/sandbox/start/">Как стать автором</a><div class="tm-feature tm-feature tm-feature_variant-inline tm-header__feature"><!-- --></div><!-- --><!--]--><!-- --></div><!--]--></div></header><div class="tm-layout"><div class="tm-page-progress-bar"></div><div class="tm-base-layout__header_is-sticky tm-base-layout__header" data-menu-sticky="true"><div class="tm-page-width"><!--[--><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/feed/">Моя лента</a><!--]--><!--[--><a class="tm-main-menu__item" href="/ru/articles/">Все потоки</a><!--]--><!--[--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/develop/">Разработка</a><!--]--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/admin/">Администрирование</a><!--]--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/design/">Дизайн</a><!--]--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/management/">Менеджмент</a><!--]--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/marketing/">Маркетинг</a><!--]--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/popsci/">Научпоп</a><!--]--><!--]--></nav></div></div><div class="tm-header-user-menu tm-base-layout__user-menu"><a class="tm-header-user-menu__item tm-header-user-menu__search" data-test-id="search-button" href="/ru/search/"><svg class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark" height="24" width="24"><title>Поиск</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#search"></use></svg></a><!-- --><!-- --><div class="tm-header-user-menu__item tm-header-user-menu__write"><div><svg class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_write tm-header-user-menu__icon_dark" height="24" width="24"><title>Написать публикацию</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#write"></use></svg></div><!-- --></div><!--[--><div class="tm-header-user-menu__item"><button class="tm-header-user-menu__toggle" data-test-id="user-menu-settings"><svg class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_dark" height="24" width="24"><title>Настройки</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#page-settings"></use></svg></button></div><a class="tm-header-user-menu__item" href="https://habr.com/kek/v1/auth/habrahabr/?back=/ru/companies/reksoft/articles/802353/&amp;hl=ru" rel="nofollow"><!--[--><button class="btn btn_solid btn_small tm-header-user-menu__login" type="button"><!--[-->Войти<!--]--></button><!--]--></a><!--]--><!-- --><!--teleport start--><!--teleport end--><!-- --></div></div><!--]--></div></div><!-- --><div class="tm-page-width"><!--[--><!--]--></div><main class="tm-layout__container"><div class="tm-page" companyname="reksoft" data-async-called="true" hl="ru" style="--0c809c5a:16px;--a086013e:100%;--7c457026:0;"><div class="tm-page-width"><!--[--><div class="tm-page__header"><!--[--><!--]--></div><div class="tm-page__wrapper"><div class="tm-page__main_has-sidebar tm-page__main"><div class="pull-down"><!-- --><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg class="tm-svg-img pull-down__icon pull-down__arrow" height="24" width="24"><title>Обновить</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#pull-arrow"></use></svg></div></div><!--[--><!--[--><div class="tm-article-presenter"><!--[--><!--[--><!-- --><div class="tm-company-profile-card tm-company-article__profile-card"><div class="tm-company-card tm-company-profile-card__info"><div class="tm-company-card__header"><a class="tm-company-card__avatar" href="/ru/companies/reksoft/profile/"><div class="tm-entity-image"><img alt="" class="tm-entity-image__pic" height="48" src="//habrastorage.org/getpro/habr/companies/b8e/3b2/eba/b8e3b2eba736695f5c24bb76d7d1a7eb.png" width="48"/></div></a><!--[--><!-- --><div class="tm-counter-container tm-company-card__rating"><div class="tm-counter-container__header"><!--[--><!--[--><!--]--><div class="tm-votes-lever tm-votes-lever tm-votes-lever_appearance-rating"><!-- --><div class="tm-votes-lever__score tm-votes-lever__score_appearance-rating tm-votes-lever__score"><!--[--><span><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter_rating tm-votes-lever__score-counter" data-test-id="votes-score-counter">86.77</span></span><!--]--></div><!-- --></div><!--]--></div><div class="tm-counter-container__footer"><!--[--><span class="tm-rating__text tm-rating__text">Рейтинг</span><!--]--></div></div><!-- --><!--]--></div><div class="tm-company-card__info"><a class="tm-company-card__name" href="/ru/companies/reksoft/profile/"><span>Reksoft</span></a><!-- --></div></div><div class="tm-company-profile-card__buttons"><div class="tm-button-follow tm-company-profile-card__button tm-company-profile-card__button_follow"><!-- --><button class="tm-button-follow__button tm-button-follow__button_big" data-test-id="follow-button" type="button">Подписаться</button></div><!-- --><!-- --><!-- --></div></div><!-- --><!--]--><!--]--><div class="tm-article-presenter__body" data-test-id="article-body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><!--[--><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><!--[--><div class="tm-article-presenter__header"><!--[--><!--]--><div class="tm-article-snippet tm-article-snippet tm-article-presenter__snippet"><!--[--><!--]--><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a class="tm-user-info__userpic" data-test-id="user-info-pic" href="/ru/users/asolovyev24/" title="asolovyev24"><div class="tm-entity-image"><!--[--><img alt="" class="tm-entity-image__pic" height="24" src="https://assets.habr.com/habr-web/img/avatars/103.png" width="24"/><!--]--></div></a><span class="tm-user-info__user tm-user-info__user_appearance-default" data-test-id="user-info-description"><a class="tm-user-info__username" href="/ru/users/asolovyev24/">asolovyev24 <!-- --></a><!--[--><span class="tm-article-datetime-published"><time datetime="2024-03-26T09:02:21.000Z" title="2024-03-26, 12:02">26  мар  2024 в 12:02</time></span><!--]--></span></span></div><!-- --></div><h1 class="tm-title tm-title_h1" data-test-id="articleTitle" lang="ru"><span>Kotlin Coroutines. Часть 1: Первое погружение</span></h1><div class="tm-article-snippet__stats" data-test-id="articleStats"><!-- --><div class="tm-article-reading-time"><span class="tm-svg-icon__wrapper tm-article-reading-time__icon"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Время на прочтение</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#clock"></use></svg></span><span class="tm-article-reading-time__label">10 мин</span></div><span class="tm-icon-counter tm-data-icons__item"><svg class="tm-svg-img tm-icon-counter__icon" height="24" width="24"><title>Количество просмотров</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#counter-views"></use></svg><span class="tm-icon-counter__value" title="11182">11K</span></span></div><div class="tm-publication-hubs__container" data-test-id="articleHubsList"><div class="tm-publication-hubs"><!--[--><span class="tm-publication-hub__link-container"><a class="tm-publication-hub__link" href="/ru/companies/reksoft/articles/"><!--[--><span>Блог компании Reksoft</span><!-- --><!--]--></a></span><span class="tm-publication-hub__link-container"><a class="tm-publication-hub__link" href="/ru/hubs/programming/"><!--[--><span>Программирование</span><span class="tm-article-snippet__profiled-hub" title="Профильный хаб">*</span><!--]--></a></span><span class="tm-publication-hub__link-container"><a class="tm-publication-hub__link" href="/ru/hubs/kotlin/"><!--[--><span>Kotlin</span><span class="tm-article-snippet__profiled-hub" title="Профильный хаб">*</span><!--]--></a></span><!--]--></div></div><!-- --><!-- --><!-- --></div></div><!--[--><!-- --><div class="tm-article-body" data-gallery-root="" lang="ru"><div><!--[--><!--]--></div><div id="post-content-body"><div><div class="article-formatted-body article-formatted-body article-formatted-body_version-2"><div xmlns="http://www.w3.org/1999/xhtml"><p>Привет, Хабр! Меня зовут Соловьев Андрей, я Java-разработчик в «Рексофт». Сегодня мы поговорим про Kotlin Coroutines. Это моя первая серьезная публикация, и я буду рад вашему фидбеку.</p><p>Ну что ж, давайте начинать!</p><p>Статья будет разделена на несколько частей, поскольку материал довольно обширный. Сразу обозначу план этой публикации, так вы сможете перейти сразу к интересующей вас части, но, конечно, лучше прочитать целиком.</p><p>Кстати, уточню: я буду употреблять термин «сопрограмма» в значении «корутина».</p><ol><li><p><strong>Когда заканчиваются потоки, и начинается мир сопрограмм</strong></p><p>1.1. Когда заканчиваются потоки и начинается мир сопрограмм</p><p>1.2. Kotlin Coroutine: о чем?</p></li><li><p><strong>Обзорная экскурсия в особенности и возможности сопрограммы</strong></p><p>2.1.  Разберемся с особенностями вызова</p><p>2.2.  Обзор билдеров</p></li><li><p><strong>Первое погружение</strong></p><p>3.1. Job: почему так важна и какую роль играет?</p><p>3.2. Связь Job и Continuation: есть ли она?</p><p>3.3. Кратко о Coroutine scope</p></li><li><p><strong>Промежуточные итоги</strong></p></li></ol><h3>1. Когда заканчиваются потоки, и начинается мир сопрограмм</h3><h4>1.1. Прикладная задача</h4><p>Начнем наш поход в мир сопрограмм с вопроса: а зачем они нам вообще нужны? Так ли отлично все работает на тредах?</p><blockquote><p><strong>Давайте рассмотрим довольно обычную задачу:</strong></p><p>У нас есть приложение, в котором одна из функций — это поиск и агрегация данных из нескольких источников. К примеру, мы ищем билеты на самолет и опрашиваем всех поставщиков. Пусть таких источников 5.</p></blockquote><p>Будем держать в памяти, что 1 thread stack ~= 1 mb, и на каждый запрос будет создаваться новый Thread (это лишь условность).</p><p>Появляется понимание: все отлично работает, когда у нас 10, 100, 200 пользователей одновременно. А если 1000? И вот тут становится интересно. Решая такую задач в лоб, используем многопоточность с помощью Thread. Это требует создания и управления несколькими потоками выполнения, а также решения проблем синхронизации. Сложно, затратно, неоптимально.</p><p>Что мы делаем? Правильно, идем гуглить: а какие решения есть на рынке?</p><p>И вот тут на рынке можно найти новое решение. В 21 Java появились виртуальные треды, предназначенные для решения проблемы с ограничением количества одновременных тредов. Виртуальных треды очень неплохо описаны самим <a href="https://docs.oracle.com/en/java/javase/21/core/virtual-threads.html#GUID-DC4306FC-D6C1-4BCC-AECE-48C32C1A8DAA">Oracle-ом</a>.</p><p><strong>Преимущества</strong>: виртуальные треды полностью по коду совместимы с обычными тредами, однако являются легковесными и позволяют в одной JVM одновременно запускать хоть миллион виртуальных тредов. В силу своей легковесности, виртуальные треды не нуждаются в тредовых пулах, каждый виртуальный тред может запускаться по мере необходимости.</p><p>Код внутри виртуального треда должен быть максимально использующим обычные блокируемые конструкции, так как будто это обычный последовательный код. Так что реализация алгоритмов на виртуальных тредах не должна вызывать трудностей.</p><p>Документация от Oracle описывает в том числе концепции использования виртуальных тредов, для упрощения перехода на них. Но на момент выхода статьи, имеется выборка библиотек, которые еще не поддерживают 21 Java.</p><p>Следующее, что лично мне приходит на ум, это реактивное программирование (да-да, решение ведь для такой задачи, подписываемся на события по поиску билетов и получаем их по мере ответа).</p><p>Очевидно, что все становится замечательно, но я лично помню ту боль, что испытывал, при изучении и кодинге с таким подходом, будучи джуном. Отсюда я могу выделить следующее.</p><ul><li><p>Сложность входа, понимания и обучения.</p></li><li><p>Производительность (этот пункт я нашел на просторах интернета). Некоторые реализации реактивного программирования могут иметь накладные расходы на производительность из-за управления потоками и обработки событий.</p></li><li><p>Сложность отладки. Асинхронность и сложная структура операторов и обработки событий.</p></li></ul><p>Следующий пункт — это callback.</p><ul><li><p>Callback hell — использование множества вложенных колбэков может привести к запутанному и трудночитаемому коду.</p></li><li><p>Сложность настройки для параллельного вычисления нетривиальных задач (например, получения пользователя и его тикетов двумя запросами).</p></li><li><p>Необходимость передачи большого количества параметров, что может привести к ошибкам и усложнению кода.</p></li></ul><h4>1.2. Kotlin Coroutine: о чем?</h4><p>Основная функциональность, которую предоставляют Kotlin Coroutines — <strong>это возможность приостановить сопрограмму в какой-то момент и возобновить ее в будущем.</strong></p><p>По своему определению они очень похожи на концепции promise, future, которые уже присутствуют в других языках программирования, таких как JavaScript, C# и т.д. Но концепция улучшена, что приводит к более понятному написанию асинхронного кода. И ведь правда, современное асинхронное программирование часто превращается в сложную путаницу обратных вызовов. Задание сопрограмм — это фоновая задача. Основная цель задания — контролировать, а также предоставлять механизм для отмены фоновой задачи.</p><p>Благодаря этому мы можем запускать наш код в основном потоке и приостанавливать его, когда запрашиваем данные из API, например. Когда сопрограмма приостановлена, поток не блокируется и может работать свободно, поэтому его можно использовать, допустим, для обработки других сопрограмм. Как только данные готовы, сопрограмма ожидает основного потока (это редкая ситуация, но может быть очередь сопрограмм, ожидающих их). Когда он получит поток, сможет продолжить с того места, где остановился.</p><p>Грубо говоря, можно запустить порядка 10000 корутин на не самом производительном ноутбуке, имеющем 8 Гб оперативной памяти, поставить их на N-секундную паузу, и через N секунд они отработают почти одновременно.</p><p>Приостановка корутины означает ее остановку на середине. Это похоже на остановку видеоигры: вы сохраняетесь в контрольной точке, выключаете игру, и тогда вы и ваш компьютер можете сосредоточиться на выполнении других задач. Затем, когда вы захотите продолжить некоторое время спустя, вы снова запустите игру, возобновите с сохраненной контрольной точки, и, таким образом, вы сможете играть с того места, где остановились ранее.</p><p>Это аналогия с сопрограммами. Когда они приостанавливаются, они возвращают Continuation (это специальный объект, дальше расскажу о нем). Это и есть сохранение в игре: мы можем использовать его, чтобы продолжить с того места, где остановились. Обратите внимание, что это сильно отличается от потока, который нельзя сохранить, только заблокировать. Сопрограмма намного мощнее. При приостановке она не потребляет никаких ресурсов. Сопрограмма может быть возобновлена в другом потоке и (по крайней мере, теоретически) Continuation может быть сериализован, десериализован и затем возобновлен</p><figure class="full-width"><img alt="Изображение взято из книги Kotlin Coroutines: Deep Dive (Kotlin for Developers) Paperback – March 14, 2022, стр. 15" data-src="https://habrastorage.org/getpro/habr/upload_files/9d2/552/fad/9d2552fad194291e7e10a6c0a211dc6a.png" height="352" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/9d2/552/fad/9d2552fad194291e7e10a6c0a211dc6a.png" title="Изображение взято из книги Kotlin Coroutines: Deep Dive (Kotlin for Developers) Paperback – March 14, 2022, стр. 15" width="786"/><div><figcaption>Изображение взято из книги Kotlin Coroutines: Deep Dive (Kotlin for Developers) Paperback – March 14, 2022, стр. 15</figcaption></div></figure><p>На картинке представлен пример кода для получения и отображения новостей на экране. Это только базовый пример.</p><h3>2. Обзорная экскурсия в особенности и возможности сопрограммы</h3><h4>2.1. Разберемся с особенностями вызова</h4><p>Как работает вызов обычной функции? Вызов функции попадает в стек и хранится там. Проблема в том, что, когда мы приостанавливаем работу, мы освобождаем поток, а в результате мы очищаем наш стек вызовов. Следовательно, стек вызовов нам никак не поможет при возобновлении работы сопрограммы.</p><p>Когда функция приостанавливается, управление переходит к Continuation. Каждое Continuation сохраняет свое состояние на момент приостановки. При вложенных друг в друга сопрограммах следующее Continuation будет ссылаться на другое, которое ссылается на третье. Похоже на капусту, где мы храним все, что относится к нашим вызовам.</p><p>Разберем ситуацию:</p><figure class="full-width"><img alt="Код, пример 1 " data-src="https://habrastorage.org/getpro/habr/upload_files/c0d/2c5/1ea/c0d2c51ea76b3c14d2c0d5a991ca4e9c.png" height="506" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/c0d/2c5/1ea/c0d2c51ea76b3c14d2c0d5a991ca4e9c.png" title="Код, пример 1 " width="556"/><div><figcaption>Код, пример 1 </figcaption></div></figure><p>Функция, <strong>а()</strong> вызывает функцию <strong>b()</strong>, та, в свою очередь, вызывает функцию <strong>с()</strong>, которая приостановлена. Во время возобновления сначала возобновляется функция <strong>c()</strong>. Потом происходит возобновление <strong>continuation b</strong>, которое вызовет функцию <strong>b()</strong>, и процесс повторяется до тех пор, пока не будет достигнута вершина стека. Т.е. управление после приостановки передается Continuation, которая после окончания работы и вызовет функцию. Приостанавливающие функции передают Continuation друг другу.</p><figure class="full-width"><img alt="Изображение взято из книги Kotlin Coroutines: Deep Dive (Kotlin for Developers) Paperback – March 14, 2022, стр. 53" data-src="https://habrastorage.org/getpro/habr/upload_files/a78/50e/c89/a7850ec894b98077a30cc1327261bd85.png" height="445" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/a78/50e/c89/a7850ec894b98077a30cc1327261bd85.png" title="Изображение взято из книги Kotlin Coroutines: Deep Dive (Kotlin for Developers) Paperback – March 14, 2022, стр. 53" width="705"/><div><figcaption>Изображение взято из книги Kotlin Coroutines: Deep Dive (Kotlin for Developers) Paperback – March 14, 2022, стр. 53</figcaption></div></figure><p>Также немаловажное правило: вызвать suspend-функцию мы можем только из suspend-функции, но при этом можем вызвать обычную функцию. Чуть дальше мы разберем особенности.</p><blockquote><p><strong>Кратко о suspend-функциях:</strong></p><p>Suspend — это такая же обычная функция с точки зрения синтаксиса, но с изменениями работы внутри. Когда происходит синхронный вызов обычной функции, мы ждем ее выполнения сколь угодно долго. Очевидно, отсюда вытекает проблема того, что поток у нас заблокирован и простаивает, производительность падает, а если мы еще отвалимся по timeout…</p></blockquote><p>Для сопрограмм создано решение, это suspend-функция. Да, все что нужно — лишь дописать это ключевое слово перед объявлением функции, а также вызвать ее из сопрограммы. Когда функция перейдет в режим ожидания, поток освободится для выполнения других задач. Функция может продолжить свое выполнение в том же потоке или в другом.</p><p>Например, напишем обычную функцию, которая синхронизирует и запрашивает что-то, а также проведем ее компиляцию в Java.</p><p> Но давайте перейдем к примеру, а то так непонятно, что к чему. Сначала возьмем<br/> простой пример, используя CompletableFuture для запроса к API.</p><figure class="full-width"><img alt="Код, пример 2" data-src="https://habrastorage.org/getpro/habr/upload_files/d30/ce0/6c1/d30ce06c13775a2e94d7fc0208ba8c59.png" height="468" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/d30/ce0/6c1/d30ce06c13775a2e94d7fc0208ba8c59.png" title="Код, пример 2" width="1591"/><div><figcaption>Код, пример 2</figcaption></div></figure><p>Что мы тут видим? Типичный базовый пример запроса с использованием CompletableFuture (прошу, не кидайтесь в меня палками, редко пишу с использованием этой технологии). Кода много, с наскока сложно разобраться, что же тут происходит.</p><p>Что там с Kotlin и корутинами?</p><figure class="full-width"><img alt="Код, пример 3" data-src="https://habrastorage.org/getpro/habr/upload_files/161/835/f0f/161835f0f8dcc8f983ed6248c06eb687.png" height="535" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/161/835/f0f/161835f0f8dcc8f983ed6248c06eb687.png" title="Код, пример 3" width="841"/><div><figcaption>Код, пример 3</figcaption></div></figure><p>А вот и пример кода на Kotlin! Согласитесь, все гораздо проще и наглядней. Также приведу небольшой пример кода, как компилируется все это в Java:</p><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/bd8/b5d/299/bd8b5d299b86a080c9a45260b74ea864.png" height="1323" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/bd8/b5d/299/bd8b5d299b86a080c9a45260b74ea864.png" width="3899"/></figure><p>Детальный разбор того, а что же происходит под капотом, будет чуть позже. :)</p><h4>2.2. Обзор билдеров</h4><p>Начнем наш разбор билдеров. Представлю 3 основных:</p><ul><li><p><strong>Launch</strong>. Очень похоже на старт Thread. Просто запустили и забыли. Важно отметить, что не блочит main Thread. А значит, если он закончил свою работу, а сопрограмма еще нет, то приложение тоже закончит свою работу, не дав доработать джобе. Внутри сложный механизм structured concurrency (структурированный параллелизм), который проставляет связи между parent-child coroutine, и мы его рассмотрим! Использую, например, для фоновых задач (догрузить контент). При вызове возвращает объект Job.</p></li></ul><figure class=""><img alt="Код, пример 4 " data-src="https://habrastorage.org/getpro/habr/upload_files/bc8/155/60d/bc815560d9c1b85e6f04b893e120a7e8.png" height="194" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/bc8/155/60d/bc815560d9c1b85e6f04b893e120a7e8.png" title="Код, пример 4 " width="413"/><div><figcaption>Код, пример 4 </figcaption></div></figure><p>А что, если нам нужно, чтобы сопрограммы точно закончили свою работу, и программа не закрылась до этого?</p><ul><li><p><strong>runBlocking</strong>. При вызове блокируется тред, в котором был запущен этот билдер, а также при каждой приостановке Coroutine. Я не видел, чтобы на нашем проекте это использовалось, но кейсы придумать можно.</p></li></ul><figure class=""><img alt="Код, пример 5 " data-src="https://habrastorage.org/getpro/habr/upload_files/2eb/a5f/905/2eba5f90573026ba09925c65f1858fd8.png" height="209" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/2eb/a5f/905/2eba5f90573026ba09925c65f1858fd8.png" title="Код, пример 5 " width="385"/><div><figcaption>Код, пример 5 </figcaption></div></figure><ul><li><p><strong>async</strong>. То же самое, что и launch, но имеет возвращаемое значение Deferred. Запускается через ключевое слово await, можно создать несколько async вызовов и дождаться завершения их работы. Полезно, например, для задачи агрегации данных из нескольких источников.</p></li></ul><figure class=""><img alt="Код, пример 6" data-src="https://habrastorage.org/getpro/habr/upload_files/402/806/486/402806486871d541f1ab1a22a2b3a326.png" height="312" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/402/806/486/402806486871d541f1ab1a22a2b3a326.png" title="Код, пример 6" width="476"/><div><figcaption>Код, пример 6</figcaption></div></figure><h3>3. Первое погружение</h3><h4>3.1. Job: почему так важна и какую роль играет?</h4><p>Для начала заглянем в реализацию launch. Встретим там Job и рассмотрим его.</p><figure class="full-width"><img alt="Код, пример 7" data-src="https://habrastorage.org/getpro/habr/upload_files/461/ac8/1ff/461ac81ff50690a4e0d8624e3127b18f.png" height="277" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/461/ac8/1ff/461ac81ff50690a4e0d8624e3127b18f.png" title="Код, пример 7" width="566"/><div><figcaption>Код, пример 7</figcaption></div></figure><p>Во-первых, стоит сказать, что каждая сопрограмма является Job. Она же, в свою очередь, представляет собой интерфейс, в котором содержатся методы для управления жизненным циклом сопрограммы. Сперва стоит посмотреть на него:</p><figure class="full-width"><img alt="Картинка из https://kotlinlang.org/docs/home.html" data-src="https://habrastorage.org/getpro/habr/upload_files/fee/ead/051/feeead051257b29ea352406aa79ce3ce.png" height="202" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/fee/ead/051/feeead051257b29ea352406aa79ce3ce.png" title="Картинка из https://kotlinlang.org/docs/home.html" width="598"/><div><figcaption>Картинка из <a href="https://kotlinlang.org/docs/home.html">https://kotlinlang.org/docs/home.html</a></figcaption></div></figure><p>Сделаем первые выводы:</p><ul><li><p>a) Имеется поддержка «отношений» родитель-ребенок. Действительно, если вернуться к пункту 2.1, то главная сопрограмма ждет, пока завершатся все дочерние, и только потом продолжает свою работу.</p></li><li><p>b) Дочерняя программа при уничтожении уничтожает и родительскую сопрограмму</p></li><li><p>c) Сопрограмма заканчивает свою работу либо со статусом Completed, либо Cancelled.</p></li></ul><p>У каждой Job имеется свое состояние. Представим таблицу из официальной документации для полного понимания:</p><figure class="full-width"><img alt="Картинка взята из документации" data-src="https://habrastorage.org/getpro/habr/upload_files/cc4/d62/2e5/cc4d622e54238bc0c657579e6477aaa9.png" height="508" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/cc4/d62/2e5/cc4d622e54238bc0c657579e6477aaa9.png" title="Картинка взята из документации" width="1393"/><div><figcaption><a href="https://kotlinlang.org/api/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines/-job/">Картинка взята из документации</a></figcaption></div></figure><p>Как мы видим, состояние зависит от того, какие действия происходят с сопрограммой. Разберем на примере.</p><p>При вызове метода cancel() у сопрограммы ее состояние изменится на Cancelling, а затем на Cancelled. Когда все дочерние сопрограммы завершат свое выполнение, состояние изменится на Completed.</p><p>Также стоит отметить, что Job может быть создан без сопрограммы с использованием фабричной функции Job(). Это позволяет создавать Job, который не связан с какой-либо сопрограммой и может быть использован в качестве контекста.</p><p>Вопрос в том, а как же мы можем это применить в реальных задачах? Можно создавать группы сопрограмм и управлять ими как единым целым. Например, можно создать родительскую Job для нескольких дочерних сопрограмм и отменить все дочерние сопрограммы одновременно, вызвав cancel() на родительской Job.</p><p>Напишем пример простого кода:</p><figure class=""><img alt="Код, пример 8" data-src="https://habrastorage.org/getpro/habr/upload_files/9db/386/cda/9db386cdaf2649a1aabf41a0a21b5c2f.png" height="396" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/9db/386/cda/9db386cdaf2649a1aabf41a0a21b5c2f.png" title="Код, пример 8" width="511"/><div><figcaption>Код, пример 8</figcaption></div></figure><h4>3.2. Связь Job и Continuation: есть ли она?</h4><p>В первую очередь, стоит узнать, что такое Continuation. Как гласит официальная документация: «<strong>Interface representing a continuation after a suspension point that returns a value of type T».</strong></p><p>Когда сопрограмма приостанавливается, ее текущее состояние сохраняется и управление передается Continuation. Continuation, в свою очередь, содержит информацию о текущем состоянии выполнения сопрограммы и позволяет возобновить выполнение после завершения асинхронной операции.</p><figure class="full-width"><img alt="Код, пример 9" data-src="https://habrastorage.org/getpro/habr/upload_files/b2c/0c5/7d1/b2c0c57d12894156dcd803e0a05dd1a3.png" height="254" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/b2c/0c5/7d1/b2c0c57d12894156dcd803e0a05dd1a3.png" title="Код, пример 9" width="787"/><div><figcaption>Код, пример 9</figcaption></div></figure><p>Фактически Continuation это callback. Передается два параметра:</p><ul><li><p>CoroutineContext сообщает, как будет приостанавливать.</p></li><li><p>Callback для передачи результата выполнения. Он состоит либо из success, либо из failure(в случае ошибки).</p></li></ul><p>Итак, Continuation определяет, как программа продолжит работу после ее приостановки, и это делает ее еще одной формой потока управления. Это будет использоваться для координации работы между всеми функциями приостановки.</p><h4>3.3. Кратко о coroutine scope</h4><p>Coroutine scope — это интерфейс, который предоставляет способ управления жизненным циклом сопрограмм. Он определяет набор методов для запуска новых сопрограмм и для отмены существующих.</p><p>В контексте библиотеки kotlinx.coroutines область действия сопрограммы обычно создается с помощью функции coroutineScope, которая является suspend-функцией, создающей новый scope для билдеров. Давайте разберем пример.</p><figure class="full-width"><img alt="Код, пример 10   " data-src="https://habrastorage.org/getpro/habr/upload_files/7d6/377/330/7d6377330216f1eaf1aa3bb2a98527d6.png" height="313" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/7d6/377/330/7d6377330216f1eaf1aa3bb2a98527d6.png" title="Код, пример 10   " width="1001"/><div><figcaption>Код, пример 10   </figcaption></div></figure><p>В этом примере мы создаем новую область действия сопрограммы, используя конструктор `Coroutine Scope` и передавая `Dispatcher`, который определяет пул потоков, используемый для выполнения сопрограмм. Затем мы запускаем новую сопрограмму, используя метод `launch` и передавая лямбда-выражение, содержащее код для запуска в сопрограмме. Наконец, мы отменяем область действия, когда заканчиваем с этим.</p><p>Разберем данный пример с другой точки зрения:</p><p>В этом примере мы видим контекст «родитель-ребенок». RunBlocking предоставляет контекст родителя, а launch — это ребенок.</p><p>Систематизируем, для чего же нам нужен Coroutine scope:</p><ul><li><p>Упрощение и группировка coroutines. Позволяет группировать несколько сопрограмм вместе, что упрощает их управление и понимание.</p></li><li><p>Ожидание выполнения всех coroutines в рамках scope. Например с помощью runBlocking.</p></li><li><p>Управление жизненным циклом. Запуск сопрограмм, а также их остановка.</p></li><li><p>Настройка поведения. CoroutineScope позволяет настроить общее поведение сопрограмм в рамках данного scope, например используемый поток или контекст.</p></li></ul><figure class="full-width"><img alt="Изображение взято из книги Kotlin Coroutines: Deep Dive (Kotlin for Developers) Paperback – March 14, 2022, стр. 74" data-src="https://habrastorage.org/getpro/habr/upload_files/54f/591/e21/54f591e21ff60fddc62fb09f89e54afa.png" height="456" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/54f/591/e21/54f591e21ff60fddc62fb09f89e54afa.png" title="Изображение взято из книги Kotlin Coroutines: Deep Dive (Kotlin for Developers) Paperback – March 14, 2022, стр. 74" width="754"/><div><figcaption>Изображение взято из книги Kotlin Coroutines: Deep Dive (Kotlin for Developers) Paperback – March 14, 2022, стр. 74</figcaption></div></figure><h3>4. Промежуточные итоги</h3><p>Kotlin Coroutine — это новая модель программирования для асинхронного и конкурентного программирования в языке Kotlin. Она предоставляет более удобный и выразительный способ работы с асинхронными операциями, такими как сетевые запросы или операции базы данных.</p><p>Ключевая особенность сопрограмм — это их приостановка, во время которой они высвобождают поток. Также они позволяют писать асинхронный код в естественном стиле последовательного выполнения.</p><p>Сопрограмма фактически это callback. Мы можем создавать кучу сопрограмм разом, но это не всегда эффективно. Мы может управлять нашими сопрограммами, группировать их, останавливать разом, если что-то пошло не так.</p><p>На этом пока все. В следующих частях мы углубимся в Kotlin Сoroutine, рассмотрим множество важных вещей, которые влияют на работу, а также проведем замеры с помощью нагрузочного теста.</p><p>Спасибо за внимание!</p><p></p></div></div></div><!-- --><!-- --></div><!-- --><!-- --></div><!--]--><!-- --><div class="tm-article-presenter__meta" data-test-id="article-meta-links"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span><ul class="tm-separated-list__list"><!--[--><li class="tm-separated-list__item"><!--[--><a class="tm-tags-list__link" href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=[kotlin]"><span>kotlin</span></a><!--]--></li><li class="tm-separated-list__item"><!--[--><a class="tm-tags-list__link" href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=[kotlin+coroutines]"><span>kotlin coroutines</span></a><!--]--></li><li class="tm-separated-list__item"><!--[--><a class="tm-tags-list__link" href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=[%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5]"><span>программирование</span></a><!--]--></li><!--]--><!-- --></ul></div><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span><ul class="tm-separated-list__list"><!--[--><li class="tm-separated-list__item"><!--[--><a class="tm-hubs-list__link" href="/ru/companies/reksoft/articles/"><!--[--><span>Блог компании Reksoft</span><!--]--></a><!--]--></li><li class="tm-separated-list__item"><!--[--><a class="tm-hubs-list__link" href="/ru/hubs/programming/"><!--[--><span>Программирование</span><!--]--></a><!--]--></li><li class="tm-separated-list__item"><!--[--><a class="tm-hubs-list__link" href="/ru/hubs/kotlin/"><!--[--><span>Kotlin</span><!--]--></a><!--]--></li><!--]--><!-- --></ul></div></div><!-- --><!--]--></article><!--]--></div><!-- --></div><div class="tm-article-sticky-panel" data-test-id="article-sticky-panel" style=""><div class="tm-data-icons tm-data-icons tm-data-icons_space-big tm-article-sticky-panel__icons" data-test-id="article-stats-icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon tm-votes-meter__icon_appearance-article" height="24" width="24"><title>Всего голосов 13: ↑11 и ↓2</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#counter-rating"></use></svg><span class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_appearance-article tm-votes-meter__value_rating tm-votes-meter__value" data-test-id="votes-meter-value" title="Всего голосов 13: ↑11 и ↓2">+11</span></div><!--teleport start--><!--teleport end--><!-- --></div><!-- --><!-- --><button class="bookmarks-button tm-data-icons__item" title="Добавить в закладки" type="button"><span class="tm-svg-icon__wrapper bookmarks-button__icon"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Добавить в закладки</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#counter-favorite"></use></svg></span><span class="bookmarks-button__counter" title="Количество пользователей, добавивших публикацию в закладки">101</span></button><div class="tm-sharing tm-data-icons__item" title="Поделиться"><button class="tm-sharing__button" type="button"><svg class="tm-sharing__icon" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13.8 13.8V18l7.2-6.6L13.8 5v3.9C5 8.9 3 18.6 3 18.6c2.5-4.4 6-4.8 10.8-4.8z" fill="currentColor"></path></svg></button><!--teleport start--><!--teleport end--></div><div class="tm-article-comments-counter-link tm-data-icons__item" title="Читать комментарии"><a class="tm-article-comments-counter-link__link" data-test-id="counter-comments" href="/ru/companies/reksoft/articles/802353/comments/"><!--[--><svg class="tm-svg-img tm-article-comments-counter-link__icon" height="24" width="24"><title>Комментарии</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#counter-comments"></use></svg><span class="tm-article-comments-counter-link__value">8</span><!--]--></a><!-- --></div><!--[--><!--[--><!--[--><!-- --><!--]--><!--]--><!--]--><!--teleport start--><!--teleport end--><!-- --></div></div></div><!--[--><!--]--><div class="tm-article-presenter__footer"><!--[--><!--[--><div class="tm-article-blocks"><!-- --><!--[--><section class="tm-block tm-block tm-block_spacing-bottom"><!-- --><!--[--><div class="tm-block__body tm-block__body tm-block__body_variant-balanced"><!--[--><div class="tm-article-author" data-test-id="article-author-info"><!--[--><!--[--><div class="tm-article-author__company"><div class="tm-article-author__company-card"><div class="tm-company-snippet"><a class="tm-company-snippet__logo-link" href="/ru/companies/reksoft/profile/"><div class="tm-entity-image"><img alt="" class="tm-entity-image__pic" height="40" src="//habrastorage.org/getpro/habr/companies/b8e/3b2/eba/b8e3b2eba736695f5c24bb76d7d1a7eb.png" width="40"/></div></a><div class="tm-company-snippet__info"><a class="tm-company-snippet__title" data-test-id="company-title" href="/ru/companies/reksoft/profile/"><span>Reksoft</span></a><div class="tm-company-snippet__description">Компания</div></div></div><div class="tm-article-author__buttons"><!-- --><!-- --></div></div><div class="tm-article-author__company-contacts"><!--[--><a class="tm-article-author__contact" href="https://vk.com/reksoft_career" rel="noopener" target="_blank">ВКонтакте</a><a class="tm-article-author__contact" href="https://telegram.me/reksoft_career" rel="noopener" target="_blank">Telegram</a><!--]--></div><div class="tm-article-author__separator"></div></div><!--]--><!--]--><div class="tm-user-card tm-user-card tm-user-card_variant-article tm-article-author__user-card" data-async-called="true"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a class="tm-user-card__userpic tm-user-card__userpic_size-40" href="/ru/users/asolovyev24/"><div class="tm-entity-image"><!--[--><img alt="" class="tm-entity-image__pic" src="https://assets.habr.com/habr-web/img/avatars/103.png"/><!--]--></div></a><div class="tm-user-card__meta"><div class="tm-counter-container tm-karma tm-karma" title=" 30 голосов "><div class="tm-counter-container__header"><!--[--><div class="karma-display positive" data-v-7635202e="">22</div><!-- --><!--]--></div><div class="tm-counter-container__footer"><!--[--><div class="tm-karma__text">Карма</div><!--teleport start--><!--teleport end--><!--]--></div></div><div class="tm-counter-container" title="Рейтинг пользователя"><div class="tm-counter-container__header"><!--[--><!--[--><!--]--><div class="tm-votes-lever tm-votes-lever tm-votes-lever_appearance-rating"><!-- --><div class="tm-votes-lever__score tm-votes-lever__score_appearance-rating tm-votes-lever__score"><!--[--><span><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter_rating tm-votes-lever__score-counter" data-test-id="votes-score-counter">0</span></span><!--]--></div><!-- --></div><!--]--></div><div class="tm-counter-container__footer"><!--[--><span class="tm-rating__text tm-rating__text">Рейтинг</span><!--]--></div></div></div></div></div><div class="tm-user-card__info tm-user-card__info_variant-article tm-user-card__info"><div class="tm-user-card__title tm-user-card__title_variant-article tm-user-card__title"><!-- --><a class="tm-user-card__nickname tm-user-card__nickname tm-user-card__nickname_variant-article" href="/ru/users/asolovyev24/"> @asolovyev24</a><!-- --></div><p class="tm-user-card__short-info tm-user-card__short-info_variant-article tm-user-card__short-info" data-test-id="user-card-speciality">Пользователь</p></div></div><div class="tm-user-card__buttons tm-user-card__buttons_variant-article tm-user-card__buttons"><!-- --><div class="tm-user-card__button"><div class="tm-button-follow tm-user-card__button-follow"><!-- --><button class="tm-button-follow__button tm-button-follow__button_big" data-test-id="follow-button" type="button">Подписаться</button></div></div><!-- --><div class="tm-user-card__button tm-user-card__button_write" data-test-id="user-card-conversations"><svg class="tm-svg-img tm-user-card__button-icon" height="16" width="16"><title>Отправить сообщение</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#mail"></use></svg></div><!-- --></div><!-- --></div><!-- --></div><!--]--></div><!--]--><!-- --></section><!-- --><!--[--><!--]--><!--]--><div class="tm-article-blocks__comments"><div class="tm-article-page-comments" id="publication-comments"><div><!--[--><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style" data-test-id="counter-comments" href="/ru/companies/reksoft/articles/802353/comments/"><!--[--><svg class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted" height="24" width="24"><title>Комментарии</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#counter-comments"></use></svg><span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted"> Комментарии 8 </span><!--]--></a><!-- --></div><!--]--></div></div></div><!--[--><!--[--><!--]--><section class="tm-block tm-block tm-block_spacing-bottom"><header class="tm-block__header tm-block__header tm-block__header_variant-borderless"><div class="tm-block__header-container"><h2 class="tm-block__title tm-block__title tm-block__title_variant-large">Публикации</h2><!--[--><!--]--></div><!-- --></header><!--[--><div class="tm-block__body tm-block__body tm-block__body_variant-condensed-slim"><!--[--><!--[--><div class="tm-tabs tm-tabs"><div class=""><!--[--><span class="tm-tabs__tab-item"><button class="tm-tabs__tab-link tm-tabs__tab-link_active tm-tabs__tab-link_slim tm-tabs__tab-link">Лучшие за сутки</button></span><span class="tm-tabs__tab-item"><button class="tm-tabs__tab-link tm-tabs__tab-link_slim tm-tabs__tab-link">Похожие</button></span><!--]--></div><!-- --></div><div class="similar-and-daily__tab-view"><div class="placeholder-wrapper"><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><div class="tm-placeholder-article-cards"><!--[--><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div><div class="tm-placeholder__user-date loads"></div></div><div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div><div class="tm-placeholder-article-card__icons tm-placeholder__counters"><!--[--><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><!--]--></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div><div class="tm-placeholder__user-date loads"></div></div><div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div><div class="tm-placeholder-article-card__icons tm-placeholder__counters"><!--[--><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><!--]--></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div><div class="tm-placeholder__user-date loads"></div></div><div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div><div class="tm-placeholder-article-card__icons tm-placeholder__counters"><!--[--><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><!--]--></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div><div class="tm-placeholder__user-date loads"></div></div><div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div><div class="tm-placeholder-article-card__icons tm-placeholder__counters"><!--[--><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><!--]--></div></div><div class="tm-placeholder-article-card"><div class="tm-placeholder__user"><div class="tm-placeholder__user-pic loads"></div><div class="tm-placeholder__user-date loads"></div></div><div class="tm-placeholder-article-card__title"><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div><div class="tm-placeholder__line tm-placeholder-article-card__title-line loads"></div></div><div class="tm-placeholder-article-card__icons tm-placeholder__counters"><!--[--><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><div class="tm-placeholder-data-icon"><div class="tm-placeholder__icon tm-placeholder__icon_large loads"></div><div class="tm-placeholder__line tm-placeholder__line_icon-text"></div></div><!--]--></div></div><!--]--></div><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --></div><!-- --></div><!--]--><!--]--></div><!--]--><!-- --></section><!--[--><!--[--><div class="placeholder-wrapper"><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><div class="tm-placeholder-inset tm-placeholder-vacancies"><div class="tm-placeholder-inset__header"><div class="tm-placeholder__line tm-placeholder__line_inset-header loads"></div></div><div class="tm-placeholder-inset__body"><ul class="tm-placeholder-list"><!--[--><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div><div class="tm-project-block-items__properties"><!--[--><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><!--]--></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div><div class="tm-project-block-items__properties"><!--[--><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><!--]--></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div><div class="tm-project-block-items__properties"><!--[--><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><!--]--></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div><div class="tm-project-block-items__properties"><!--[--><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><!--]--></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div><div class="tm-project-block-items__properties"><!--[--><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><!--]--></div></li><!--]--></ul></div><div class="tm-placeholder-inset__footer"><div class="tm-placeholder__line tm-placeholder__line_inset-footer loads"></div></div></div><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --></div><!--]--><!--]--><!-- --><!--[--><!--]--><!--]--></div><!--]--><!--]--></div></div><!--]--><!--]--></div></div><div class="tm-page__sidebar"><!--[--><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__placeholder_initial"></div><div class="tm-sexy-sidebar_initial tm-sexy-sidebar" style="margin-top:0px;"><!--[--><!--]--><!-- --><div class="tm-layout-sidebar__placeholder_initial"></div><!--[--><section class="tm-block tm-block tm-block_spacing-bottom"><header class="tm-block__header tm-block__header"><div class="tm-block__header-container"><h2 class="tm-block__title tm-block__title">Информация</h2><!--[--><!--]--></div><!-- --></header><!--[--><div class="tm-block__body tm-block__body"><!--[--><div class="tm-company-basic-info"><dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap tm-description-list__title">Сайт</dt><dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap tm-description-list__body"><!--[--><a class="tm-company-basic-info__link" href="http://www.reksoft.ru" target="_blank">www.reksoft.ru</a><!--]--></dd></dl><dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap tm-description-list__title">Дата регистрации</dt><dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap tm-description-list__body"><!--[--><time datetime="2008-08-09T07:43:04.000Z" title="2008-08-09, 11:43">9  августа  2008</time><!--]--></dd></dl><dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap tm-description-list__title">Дата основания</dt><dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap tm-description-list__body"><!--[--><time datetime="1991-05-29T21:00:00.000Z" title="1991-05-30, 00:00">30  мая  1991</time><!--]--></dd></dl><dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap tm-description-list__title">Численность</dt><dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap tm-description-list__body"><!--[-->1 001–5 000 человек<!--]--></dd></dl><dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap tm-description-list__title">Местоположение</dt><dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap tm-description-list__body"><!--[-->Россия<!--]--></dd></dl><!-- --></div><!--]--></div><!--]--><!-- --></section><div class="tm-company-widgets"><!--[--><!--]--></div><!-- --><!-- --><!--]--><!-- --></div></div><!--]--></div></div><!-- --><!--]--></div></div></main><!-- --></div><div class="tm-footer-menu"><div class="tm-page-width"><!--[--><div class="tm-footer-menu__container"><!--[--><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">Ваш аккаунт</p><div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><!--[--><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/companies/reksoft/articles/802353/&amp;hl=ru" rel="nofollow" target="_self">Войти</a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/companies/reksoft/articles/802353/&amp;hl=ru" rel="nofollow" target="_self">Регистрация</a></li><!--]--></ul></div></div><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">Разделы</p><div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><!--[--><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/articles/">Статьи</a></li><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/news/">Новости</a></li><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/hubs/">Хабы</a></li><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/companies/">Компании</a></li><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/users/">Авторы</a></li><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/sandbox/">Песочница</a></li><!--]--></ul></div></div><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">Информация</p><div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><!--[--><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/docs/help/">Устройство сайта</a></li><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/docs/authors/codex/">Для авторов</a></li><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/docs/companies/corpblogs/">Для компаний</a></li><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/docs/docs/transparency/">Документы</a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement/?hl=ru_RU" target="_blank">Соглашение</a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/?hl=ru_RU" target="_blank">Конфиденциальность</a></li><!--]--></ul></div></div><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">Услуги</p><div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><!--[--><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/corporate-blogs/" target="_blank">Корпоративный блог</a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/advertising/" target="_blank">Медийная реклама</a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/native-special/" target="_blank">Нативные проекты</a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/education-programs/" target="_blank">Образовательные программы</a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/hello-startup/" target="_blank">Стартапам</a></li><!--]--></ul></div></div><!--]--></div><!--]--></div></div><div class="tm-footer"><div class="tm-page-width"><!--[--><div class="tm-footer__container"><!-- --><div class="tm-footer__social"><!--[--><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Facebook</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Twitter</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>VK</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-vk"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Telegram</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Youtube</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://dzen.ru/habr" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Яндекс Дзен</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-dzen"></use></svg></a><!--]--></div><!--teleport start--><!--teleport end--><button class="tm-footer__link"><!-- --> Настройка языка</button><a class="tm-footer__link" href="/ru/feedback/">Техническая поддержка</a><div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2025, </span><span class="tm-copyright__name"><a class="tm-copyright__link" href="https://company.habr.com/" rel="noopener" target="_blank">Habr</a></span></span></div></div><!--]--></div></div><!-- --><!--]--></div><!-- --></div></div>
<div id="overlays"><!-- --><!--teleport anchor--><!-- --><!--teleport anchor--><!-- --><!--teleport anchor--><!-- --><!--teleport anchor--><!-- --><!--teleport anchor--><!-- --><!--teleport anchor--></div>
</body>
</html>
