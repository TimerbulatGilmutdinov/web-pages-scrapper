<!DOCTYPE html>

<html lang="ru">
<head>
<title>Test-Driven Development: как полюбить модульное тестирование / Хабр</title>
</head>
<body>
<div id="mount"><div data-async-called="true" id="app"><div class="tm-layout__wrapper"><!--[--><!-- --><div></div><!-- --><header class="tm-header" data-test-id="header"><div class="tm-page-width"><!--[--><div class="tm-header__container"><!-- --><span class="tm-header__logo-wrap"><a class="tm-header__logo tm-header__logo_hl-ru tm-header__logo" href="/ru/"><svg class="tm-svg-img tm-header__icon" height="16" width="16"><title>Хабр</title><use xlink:href="/img/habr-logo-ru.svg#logo"></use></svg></a><span class="tm-header__beta-sign" style="display:none;">β</span></span><!--[--><div class="tm-dropdown tm-header__projects"><div class="tm-dropdown__head"><!--[--><button class="tm-header__dropdown-toggle"><svg class="tm-svg-img tm-header__icon tm-header__icon_dropdown" height="16" width="16"><title>Открыть список</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#arrow-down"></use></svg></button><!--]--></div><!-- --></div><a class="tm-header__become-author-btn" href="/ru/sandbox/start/">Как стать автором</a><div class="tm-feature tm-feature tm-feature_variant-inline tm-header__feature"><!-- --></div><!-- --><!--]--><!-- --></div><!--]--></div></header><div class="tm-layout"><div class="tm-page-progress-bar"></div><div class="tm-base-layout__header_is-sticky tm-base-layout__header" data-menu-sticky="true"><div class="tm-page-width"><!--[--><div class="tm-base-layout__header-wrapper"><div class="tm-main-menu"><div class="tm-main-menu__section"><nav class="tm-main-menu__section-content"><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/feed/">Моя лента</a><!--]--><!--[--><a class="tm-main-menu__item" href="/ru/articles/">Все потоки</a><!--]--><!--[--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/develop/">Разработка</a><!--]--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/admin/">Администрирование</a><!--]--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/design/">Дизайн</a><!--]--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/management/">Менеджмент</a><!--]--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/marketing/">Маркетинг</a><!--]--><!--[--><a class="tm-main-menu__item" data-test-id="main-menu-item" href="/ru/flows/popsci/">Научпоп</a><!--]--><!--]--></nav></div></div><div class="tm-header-user-menu tm-base-layout__user-menu"><a class="tm-header-user-menu__item tm-header-user-menu__search" data-test-id="search-button" href="/ru/search/"><svg class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_search tm-header-user-menu__icon_dark" height="24" width="24"><title>Поиск</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#search"></use></svg></a><!-- --><!-- --><div class="tm-header-user-menu__item tm-header-user-menu__write"><div><svg class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_write tm-header-user-menu__icon_dark" height="24" width="24"><title>Написать публикацию</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#write"></use></svg></div><!-- --></div><!--[--><div class="tm-header-user-menu__item"><button class="tm-header-user-menu__toggle" data-test-id="user-menu-settings"><svg class="tm-svg-img tm-header-user-menu__icon tm-header-user-menu__icon_dark" height="24" width="24"><title>Настройки</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#page-settings"></use></svg></button></div><a class="tm-header-user-menu__item" href="https://habr.com/kek/v1/auth/habrahabr/?back=/ru/companies/sberbank/articles/851052/&amp;hl=ru" rel="nofollow"><!--[--><button class="btn btn_solid btn_small tm-header-user-menu__login" type="button"><!--[-->Войти<!--]--></button><!--]--></a><!--]--><!-- --><!--teleport start--><!--teleport end--><!-- --></div></div><!--]--></div></div><!-- --><div class="tm-page-width"><!--[--><!--]--></div><main class="tm-layout__container"><div class="tm-page" companyname="sberbank" data-async-called="true" hl="ru" style="--0c809c5a:16px;--a086013e:100%;--7c457026:0;"><div class="tm-page-width"><!--[--><div class="tm-page__header"><!--[--><div class="tm-company-card__branding tm-company-card__branding_loading tm-company-article__branding" data-test-id="company-card-branding"><div class="tm-company-card__branding-placeholder"><!-- --></div><img class="tm-company-card__branding-image" src="//habrastorage.org/getpro/habr/branding/98e/c7c/38f/98ec7c38f77f1e1218096088ab63c2e2.png"/></div><!--]--></div><div class="tm-page__wrapper"><div class="tm-page__main_has-sidebar tm-page__main"><div class="pull-down"><!-- --><div class="pull-down__header" style="height:0px;"><div class="pull-down__content" style="bottom:10px;"><svg class="tm-svg-img pull-down__icon pull-down__arrow" height="24" width="24"><title>Обновить</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#pull-arrow"></use></svg></div></div><!--[--><!--[--><div class="tm-article-presenter"><!--[--><!--[--><!-- --><div class="tm-company-profile-card tm-company-article__profile-card"><div class="tm-company-card tm-company-profile-card__info"><div class="tm-company-card__header"><a class="tm-company-card__avatar" href="/ru/companies/sberbank/profile/"><div class="tm-entity-image"><img alt="" class="tm-entity-image__pic" height="48" src="//habrastorage.org/getpro/habr/company/9db/3c1/ec0/9db3c1ec02265b8bcbfdfb0d23d8b9f2.jpg" width="48"/></div></a><!--[--><!-- --><div class="tm-counter-container tm-company-card__rating"><div class="tm-counter-container__header"><!--[--><!--[--><!--]--><div class="tm-votes-lever tm-votes-lever tm-votes-lever_appearance-rating"><!-- --><div class="tm-votes-lever__score tm-votes-lever__score_appearance-rating tm-votes-lever__score_no-margin tm-votes-lever__score"><!--[--><span><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter_rating tm-votes-lever__score-counter" data-test-id="votes-score-counter">540.29</span></span><!--]--></div><!-- --></div><!--]--></div><div class="tm-counter-container__footer"><!--[--><span class="tm-rating__text tm-rating__text">Рейтинг</span><!--]--></div></div><!-- --><!--]--></div><div class="tm-company-card__info"><a class="tm-company-card__name" href="/ru/companies/sberbank/profile/"><span>Сбер</span></a><div class="tm-company-card__description">Технологии, меняющие мир</div></div></div><div class="tm-company-profile-card__buttons"><div class="tm-button-follow tm-company-profile-card__button tm-company-profile-card__button_follow"><!-- --><button class="tm-button-follow__button tm-button-follow__button_big" data-test-id="follow-button" type="button">Подписаться</button></div><!-- --><!-- --><!-- --></div></div><!-- --><!--]--><!--]--><div class="tm-article-presenter__body" data-test-id="article-body"><div class="tm-misprint-area"><div class="tm-misprint-area__wrapper"><!--[--><article class="tm-article-presenter__content tm-article-presenter__content_narrow"><!--[--><div class="tm-article-presenter__header"><!--[--><!--]--><div class="tm-article-snippet tm-article-snippet tm-article-presenter__snippet"><!--[--><!--]--><div class="tm-article-snippet__meta-container"><div class="tm-article-snippet__meta"><span class="tm-user-info tm-article-snippet__author"><a class="tm-user-info__userpic" data-test-id="user-info-pic" href="/ru/users/xpendence/" title="xpendence"><div class="tm-entity-image"><img alt="" class="tm-entity-image__pic" height="24" src="//habrastorage.org/r/w48/getpro/habr/avatars/e27/9c5/cf5/e279c5cf56942c512857d7a503b92c95.jpg" width="24"/></div></a><span class="tm-user-info__user tm-user-info__user_appearance-default" data-test-id="user-info-description"><a class="tm-user-info__username" href="/ru/users/xpendence/">xpendence <!-- --></a><!--[--><span class="tm-article-datetime-published"><time datetime="2024-11-15T06:49:03.000Z" title="2024-11-15, 09:49">15  ноя  2024 в 09:49</time></span><!--]--></span></span></div><!-- --></div><h1 class="tm-title tm-title_h1" data-test-id="articleTitle" lang="ru"><span>Test-Driven Development: как полюбить модульное тестирование</span></h1><div class="tm-article-snippet__stats" data-test-id="articleStats"><div class="tm-article-complexity tm-article-complexity_complexity-medium"><span class="tm-svg-icon__wrapper tm-article-complexity__icon"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Уровень сложности</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#complexity-medium"></use></svg></span><span class="tm-article-complexity__label">Средний</span></div><div class="tm-article-reading-time"><span class="tm-svg-icon__wrapper tm-article-reading-time__icon"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Время на прочтение</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#clock"></use></svg></span><span class="tm-article-reading-time__label">12 мин</span></div><span class="tm-icon-counter tm-data-icons__item"><svg class="tm-svg-img tm-icon-counter__icon" height="24" width="24"><title>Количество просмотров</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#counter-views"></use></svg><span class="tm-icon-counter__value" title="4242">4.2K</span></span></div><div class="tm-publication-hubs__container" data-test-id="articleHubsList"><div class="tm-publication-hubs"><!--[--><span class="tm-publication-hub__link-container"><a class="tm-publication-hub__link" href="/ru/companies/sberbank/articles/"><!--[--><span>Блог компании Сбер</span><!-- --><!--]--></a></span><span class="tm-publication-hub__link-container"><a class="tm-publication-hub__link" href="/ru/hubs/programming/"><!--[--><span>Программирование</span><span class="tm-article-snippet__profiled-hub" title="Профильный хаб">*</span><!--]--></a></span><span class="tm-publication-hub__link-container"><a class="tm-publication-hub__link" href="/ru/hubs/web_testing/"><!--[--><span>Тестирование веб-сервисов</span><span class="tm-article-snippet__profiled-hub" title="Профильный хаб">*</span><!--]--></a></span><span class="tm-publication-hub__link-container"><a class="tm-publication-hub__link" href="/ru/hubs/java/"><!--[--><span>Java</span><span class="tm-article-snippet__profiled-hub" title="Профильный хаб">*</span><!--]--></a></span><span class="tm-publication-hub__link-container"><a class="tm-publication-hub__link" href="/ru/hubs/kotlin/"><!--[--><span>Kotlin</span><span class="tm-article-snippet__profiled-hub" title="Профильный хаб">*</span><!--]--></a></span><!--]--></div></div><!-- --><!-- --><!-- --></div></div><!--[--><!-- --><div class="tm-article-body" data-gallery-root="" lang="ru"><div><!--[--><!--]--></div><div id="post-content-body"><div><div class="article-formatted-body article-formatted-body article-formatted-body_version-2"><div xmlns="http://www.w3.org/1999/xhtml"><p>Как и многие, я, как мог, сопротивлялся Test-Driven Development. Я не понимал, почему тесты нужно писать перед реализацией. Почему мы должны выворачивать разработку наизнанку и переворачивать естественный, как мне тогда казалось, процесс, с ног на голову.</p><p>Но, так или иначе, разработка через тестирование настигла и меня. Да, до сих пор получается не идеально, но значимость модульных тестов (а значит, и разработки через тестирование) сейчас мне видится неоспоримой.</p><p>И об этом мы поговорим в статье ниже.</p><p>Мы разберём страхи, останавливающие разработчика перед тем, чтобы начать, наконец, писать тесты. Выявим очевидные преимущества. Рассмотрим основные правила разработки через тестирование. И подкрепим всё это реальными примерами.</p><figure class="full-width"><img alt="Какой ты сегодня разработчик? ツ" data-blurred="true" data-src="https://habrastorage.org/getpro/habr/upload_files/614/33d/274/61433d274f46b67c8e194f9056defd26.jpeg" height="1542" src="https://habrastorage.org/r/w780q1/getpro/habr/upload_files/614/33d/274/61433d274f46b67c8e194f9056defd26.jpeg" title="Какой ты сегодня разработчик? ツ" width="3554"/><div><figcaption>Какой ты сегодня разработчик? ツ</figcaption></div></figure><h2>С чего начать?</h2><p>Лично мой путь погружения в разработку через тестирование начался с книг Роберта Мартина. Первые упоминания о TDD появились в «<em>Идеальном программисте</em>», где Роберт Мартин упомянул такой подход вскользь. Ну а уж в «<em>Идеальной работе</em>» он отыгрался по полной, посвятив этому подходу чуть ли не половину книги.</p><p>Ещё более весомый вклад в продвижение разработки через тестирование внесла книга Кента Бека "Экстремальное программирование. Разработка через тестирование". Именно благодаря ей Кент Бек по праву считается основоположником этого подхода.</p><p>Начните с этих книг. Чёткий слог изложения Кента Бека и позитивный настрой Роберта Мартина воодушевят вас попробовать этот подход.</p><h2>Начинать страшно</h2><h3>Страх первый. Придётся переучиваться программированию</h3><p>Да, разработка через тестирование существенно меняет саму парадигму программирования, по сути, переворачивая его с ног на голову. Но на самом деле (внезапно) разработка через тестирование делает написание кода ещё более естественным, чем при обычном подходе.</p><p>Смотрите.</p><p>У нас есть техническое задание. Аналитик описал его в Jira, а может быть, в Confluence. Так или иначе, техническое задание написано человеческим языком и адресовано непосредственно разработчику. Но что, если бы мы могли адресовать техническое задание напрямую исполняемому коду? Чтобы техническое задание влияло напрямую на код и, к тому же, постоянно его валидировало?</p><p>Таким техническим заданием являются тесты.</p><p>Тесты описывают, как именно должна работать та часть кода, которую они тестируют. Тесты контролируют выполнение кода именно таким образом, как им нужно. Если мы способны подробно описать поведение приложения при помощи тестов — будьте уверены — выполнение кода будет соответствовать техническому заданию.</p><figure class="full-width"><img alt="Тесты валидируют исполнение технического задания" data-src="https://habrastorage.org/getpro/habr/upload_files/c7b/68b/e10/c7b68be10a81f26c87c98bab6e4c140c.png" height="1108" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/c7b/68b/e10/c7b68be10a81f26c87c98bab6e4c140c.png" title="Тесты валидируют исполнение технического задания" width="2796"/><div><figcaption>Тесты валидируют исполнение технического задания</figcaption></div></figure><h4>Не бойтесь того, что вам придётся писать код якобы неестественным путём. Бойтесь того, что ваш код не будет соответствовать техническому заданию.</h4><h3>Страх второй. Придётся постоянно писать и поддерживать кучу тестов</h3><p>С этим сложно поспорить, и это действительно будет так. В проектах, покрытых тестами, доля тестов обычно занимает десятки процентов кодовой базы. И их действительно придётся постоянно дописывать и поддерживать. Это долго, нудно и тяжело (на самом деле, нет).</p><p>Тем не менее, поставка непроверенного кода делает его незащищённым перед множеством багов. Мы не можем гарантировать качество кода, пока не создадим условия, которые будут делать это за нас.</p><p>Представим себе типичный проект, не покрытый тестами. В работоспособности некоторых функций мы уверены. Работоспособность некоторых нам не ведома. Некоторые функции не работоспособны, на них уже заведены баги.</p><figure class="full-width"><img alt="Когда приложение не покрыто тестами, ты не знаешь, насколько оно рабочее." data-src="https://habrastorage.org/getpro/habr/upload_files/dc5/f12/7a5/dc5f127a5dad8d537a104f7c2441a139.png" height="1356" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/dc5/f12/7a5/dc5f127a5dad8d537a104f7c2441a139.png" title="Когда приложение не покрыто тестами, ты не знаешь, насколько оно рабочее." width="2654"/><div><figcaption>Когда приложение не покрыто тестами, ты не знаешь, насколько оно рабочее.</figcaption></div></figure><p>А теперь представим проект, покрытый тестами. Каждый из тестов контролирует свой маленький участок, гарантируя его работоспособность. Конечно же, качество контроля зависит от того, как качественно вы напишете тесты. Конечно же, вы не сможете покрыть тестами всё приложение сверху донизу. Но контролируя таким образом львиную часть кода, вы перекладываете эту ответственность на вашу <em>армию тестов</em>, освобождая время на написание ещё чего-то прекрасного.</p><figure class="full-width"><img alt="Та самая армия тестов" data-src="https://habrastorage.org/getpro/habr/upload_files/882/213/008/882213008c65b912b467a570ef02f732.png" height="1436" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/882/213/008/882213008c65b912b467a570ef02f732.png" title="Та самая армия тестов" width="2766"/><div><figcaption>Та самая армия тестов</figcaption></div></figure><h4>Не бойтесь того, что вам придётся поддерживать армию тестов. Бойтесь того, что ваш код не будет защищён.</h4><h3>Страх третий. Посвятив себя написанию тестов, можно не уложиться в спринт</h3><p>Действительно, может показаться, что написание тестов занимает кучу времени. Но давайте посчитаем.</p><p>Написание одного теста лично у меня занимает в среднем 5 минут. Соответственно, написание десяти тестов займёт около 50 минут.</p><p>Предположим, что только один тест из десяти написанных был написан не зря и вовремя поймал баг, который вполне мог оказаться на тестовом стенде. Итого, на предотвращение одного бага мы потратили 50 минут. Не многовато ли?</p><figure class="full-width"><img alt="50 минут на один баг. Не много ли?" data-src="https://habrastorage.org/getpro/habr/upload_files/3c3/0ca/63e/3c30ca63e8209c86f770244b1cf08d15.png" height="1466" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/3c3/0ca/63e/3c30ca63e8209c86f770244b1cf08d15.png" title="50 минут на один баг. Не много ли?" width="3836"/><div><figcaption>50 минут на один баг. Не много ли?</figcaption></div></figure><p>Хорошо, мы не стали писать тесты. И тот баг, который мы могли обнаружить через покрытие тестами, не был обнаружен и попал на тестовый стенд. Где его обнаружил тестировщик.</p><p>По какому алгоритму будет происходить лечение этого бага?</p><p>Тестировщику потребуется какое-то время, чтобы обработать баг. Ему нужно удостовериться, что это баг. Проверить, что он точно воспроизводится. Уточнить что-то у аналитика или разработчика. Оформить баг, приложив все данные. На это всё у тестировщика уйдёт минимум полчаса (а обычно - больше).</p><p>Далее, баг берёт в работу разработчик. Разработчику необходимо воспроизвести баг локально. Если потребуется, уточнить что-то у аналитика. Возможно, получить дополнительную информацию от тестировщика. Понять причину бага. Исправить его. Задеплоиться на стенд. На всё это у разработчик потратить минимум два часа. Прибавьте к этому возможный повторный пулл-реквест, код-ревью и мёрдж в develop.</p><p>После этого, тестировщик берёт задачу в работу. Убеждается, что баг исправлен, и закрывает его. Ещё полчаса.</p><figure class="full-width"><img alt="3 часа на баг, который вырвался на стенд" data-src="https://habrastorage.org/getpro/habr/upload_files/a78/63f/f5c/a7863ff5cd11b3326a1621f13a22164b.png" height="1420" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/a78/63f/f5c/a7863ff5cd11b3326a1621f13a22164b.png" title="3 часа на баг, который вырвался на стенд" width="3058"/><div><figcaption>3 часа на баг, который вырвался на стенд</figcaption></div></figure><p>Итого, при самых скромных подсчётах, лечение одного бага занимает около 3 часов. А написание 10 тестов заняло бы 50 минут.</p><h4>Не спрашивайте, где взять время. Возьмите его у себя. Напишите тесты.</h4><h2>Но каковы преимущества такого подхода?</h2><p>Любое улучшение нужно делать ради конкретной выгоды. И если со страхами всё более-менее понятно, то выгода от перехода к разработке через тестирование всё ещё кажется весьма сомнительной.</p><p>Разработка через тестирование — это всего лишь подход, который обеспечивает качественное покрытие кода тестами. Работоспособность каждой функции проверена и соответствует техническому заданию. Точка.</p><p>Разберём основные преимущества разработки через тестирование.</p><h3>Смелость</h3><p>Коду, покрытому тестами, ничего не угрожает. В такой код можно вносить любые изменения, подвергать его рефакторингу и всячески ломать. Тесты гарантируют работоспособность кода. Пока тесты проходят, вы ничего не сломали. Как только вы что-то сломаете, тесты сразу сообщат вам об этом своим громким падением.</p><h3>Живая документация</h3><p>Как мы обсуждали ранее, хорошо написанные тесты являются техническим заданием в коде, которое самостоятельно валидирует свой код. Но помимо этого, каждый тест представляет собой пример использования вашего кода. Модульные тесты представляют собой документацию, описывающую самый нижний уровень системы. Это лучшая низкоуровневая документация, которая только возможна.</p><h3>Архитектура</h3><p>Хорошо спроектированная архитектура легко тестируется. Разрабатывая через тестирование, мы уверены, что наши функции не перегружены, правильно декомпозированы и выполняют что-то одно.</p><h3>Снижение плотности дефектов</h3><p>Результатом первых трёх преимуществ является преимущество четвёртое: множество компаний, самых разных, сообщают о снижении количества дефектов в 2, 5, 10 и более раз. Мы, как профессионалы, не можем игнорировать такие показатели.</p><h2>Три закона Test-Driven Development</h2><p>Итак, что же такое Test-Driven Development? Подход опирается на три закона, которые и определяют шаги разработки.</p><h2>Закон первый. Сначала тест, потом функциональность.</h2><p>Главный закон разработки через тестирование заключается в том, что мы не пишем основной код в пакете <code>main</code>, пока не напишем модульный тест, который его проверяет. Вы спросите: но как же мы тогда напишем тест? Ведь он будет вызывать функцию, которая не существует.</p><p>Решение этой проблемы лежит на поверхности. Если вы читали мою статью «<a href="https://habr.com/ru/articles/752782/">Приложение от проекта до релиза: этапы реализации</a>», вы знаете ответ. Если вдруг не читали, рекомендую к прочтению. Вызывать функцию, которая ещё не реализована, нам помогают <strong><em>интерфейсы</em></strong>.</p><p>Интерфейс является <em>не реализацией, а лишь декларацией</em> будущей функциональности. Написание интерфейсов происходит на этапе проектирования будущей архитектуры приложения, и осуществляется до реализации через тестирование. Таким образом, мы сначала проектируем приложение через интерфейсы, а уж потом - реализуем функциональность. В тесте, предваряющем функциональность, мы вызываем интерфейсную функцию, которая ещё не реализована.</p><h3>Закон второй. Один тест проверяет только одну функцию.</h3><p>Каждая функция <em>должна быть протестирована отдельно от остальных</em>. Различные сценарии в рамках одной функции должны быть протестированы отдельно друг от друга. На каждый такой сценарий пишется свой собственный тест.</p><p>Таким образом, если, предположим, у вас есть функция, которая содержит в себе несколько сценариев (например, позитивный и негативный, с выбрасыванием исключения), у вас должен быть тест на позитивный сценарий и на исключение.</p><h3>Закон третий. Функция должна обеспечить только прохождение своего теста.</h3><p>Как только вы написали код, который обеспечивает прохождение теста, который был написан до этого и не проходит, вы заканчиваете работу над этим кодом, и переходите к написанию следующего теста, который не будет проходить.</p><p>Иными словами, <em>вы пишете код только тогда, когда у вас есть тест, который не проходит</em>. Как только тест начинает проходить, вы не пишете код. Для того, чтобы писать код дальше, вам придётся написать тест, который не проходит.</p><p>Всё просто.</p><hr/><h2>Перейдём к практике</h2><p>Для того, чтобы вышеописанные тезисы не пропали даром, их необходимо закрепить практикой. Что мы и сделаем. Мы создадим приложение и реализуем функции одного из сервисов при помощи <strong>Test-Driven Development</strong>.</p><h3>Подготовка проекта</h3><p>Согласно луковичной архитектуре, приложение реализуется посредством выполнения следующих шагов:</p><ol><li><p>Проектирование предметной области (бизнес-сущности).</p></li><li><p>Реализация логики приложения через сервисы.</p></li><li><p>Подключение к внешним интерфейсам через слой DAO.</p></li></ol><h4>Проектирование предметной области</h4><p>Что ж, давайте спроектируем нашу предметную область. Для простоты примера, пусть это будет одна-единственная бизнес-сущность, и называться она будет <code>Process</code>.</p><pre><code class="kotlin">data class Process(
    val id: UUID? = null,
    val state: ProcessState,
    val createdAt: OffsetDateTime? = null,
    val updatedAt: OffsetDateTime? = null
)</code></pre><p>У <code>Process</code> будет минимальное количество полей: три служебных (<code>id</code>, <code>createdAt</code>, <code>updatedAt</code>) и одно бизнесовое (<code>state</code>). Служебные поля, поскольку они являются атрибутами хранилища данных, будут заполняться в репозитории. Бизнес-поле будет заполняться в приложении.</p><h4>Проектирование сервисного слоя</h4><p>Наш сервис будет содержать в себе стандартный набор CRUD-операций. Конечно же, на данном этапе это будет интерфейс.</p><pre><code class="kotlin">interface ProcessService {

    fun save(process: Process): Process

    fun update(process: Process)

    fun get(id: UUID): Process

    fun delete(id: UUID)
}</code></pre><p>Мы можем сразу создать <code>ProcessServiceImpl</code>, но и это не обязательно:</p><pre><code class="kotlin">@Service
class ProcessServiceImpl(
    private val repository: ProcessRepository
) : ProcessService {

    override fun save(process: Process): Process {
        TODO("Not yet implemented")
    }

    override fun update(process: Process) {
        TODO("Not yet implemented")
    }

    override fun get(id: UUID): Process {
        TODO("Not yet implemented")
    }

    override fun delete(id: UUID) {
        TODO("Not yet implemented")
    }
}</code></pre><p>Этого достаточно, чтобы приступить к разработке через тестирование.</p><blockquote><p><em>В нашем примере присутствует всего одна сущность, но вот вам совет: всегда начинайте реализовывать логику самой независимой сущности.</em></p><p><em>Если бы в нашем проекте была вторая сущность, предположим, </em><strong><em>ProcessVersion</em></strong><em>, которая была бы связана с сущностью </em><strong><em>Process</em></strong><em> связью один-ко-многим и имела бы на неё обратную ссылку, мы бы всё равно начали разрабатывать логику с сущности </em><strong><em>Process</em></strong><em>, поскольку она полностью независима, и мы можем создавать её экземпляры без оглядки на </em><strong><em>ProcessVersion</em></strong><em>.</em></p><p><em>Если бы мы начали с </em><strong><em>ProcessVersion</em></strong><em>, то для создания этой сущности нам бы пришлось предварительно создать </em><strong><em>Process</em></strong><em>, и мы всё равно пришли бы к реализации </em><strong><em>Process</em></strong><em>.</em></p><p><em>Этапы реализации созависимых сервисов тоже описаны </em><a href="https://habr.com/ru/articles/752782/"><em>в моей статье</em></a><em>.</em></p></blockquote><p>Мы начнём разработку с теста на функцию <code>save</code>. После прохождения этого теста, у нас будет реализована функциональность, позволяющая сохранять наш процесс где бы то ни было. Это позволит нам написать тесты на функции <code>get</code>, <code>update</code> и <code>delete</code>, требующие уже сохранённый в базе объект.</p><h3>Жизненный цикл исполнения теста</h3><p>Любой тест, явно или неявно, должен содержать в себе 4 этапа:</p><ol><li><p>Подготовка окружения.</p></li><li><p>Вызов тестируемой функции.</p></li><li><p>Проверка результата.</p></li><li><p>Очистка данных.</p></li></ol><h4>Этап первый. Подготовка окружения</h4><p>Для того, чтобы вызвать тестируемую функцию, необходимо подготовить окружение. Сгенерировать нужные сущности. Если нужно, предварительно сохранить их в базе данных. Проинициализировать служебные компоненты нужным состоянием.</p><p>В нашем случае, будет достаточно сгенерировать бизнес-сущность <code>Process</code>. И здесь я рекомендую воспользоваться специальным генератором, который мы сможем вызвать из любого места, где нам потребуется эта бизнес-сущность.</p><figure class="full-width"><img alt="Генератор пригодится везде, где только можно" data-src="https://habrastorage.org/getpro/habr/upload_files/6c5/3c7/2d7/6c53c72d7a4f0fc0aaea46ca4dfe6eec.png" height="1836" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/6c5/3c7/2d7/6c53c72d7a4f0fc0aaea46ca4dfe6eec.png" title="Генератор пригодится везде, где только можно" width="3840"/><div><figcaption>Генератор пригодится везде, где только можно</figcaption></div></figure><p>А поскольку сущность является ключевой, генерировать её мы будем постоянно.</p><pre><code class="kotlin">@Component
class ProcessGenerator {

    fun generate(): Process = Process(
        state = ProcessState.entries.random()
    )
}</code></pre><p>В нашем примере, при генерации процесса нам потребуется проинициализировать поле <code>state</code> случайным значением.</p><p>По итогам подготовки, наш тест будет выглядеть так:</p><pre><code class="kotlin">@Test
fun save() {
    //prepare
    val process = processGenerator.generate()
}</code></pre><p>Перейдём ко второму этапу.</p><h4>Этап второй. Вызов тестируемой функции</h4><p>Здесь мы просто вызываем тестируемую функцию:</p><pre><code class="kotlin">@Test
fun save() {
    //prepare
    val process = processGenerator.generate()
    //when
    processService.save(process)
}</code></pre><h4>Этап 3. Проверка результата</h4><p>На этом этапе, нам важно проверить результат на соответствие ожидаемому. Это ключевой момент в жизни любого теста. Мы проверим, что сохранённому процессу присвоены идентификатор и время сохранения, а состояние совпадает со сгенерированным на этапе 1:</p><pre><code class="kotlin">@Test
fun save() {
    //prepare
    val process = processGenerator.generate()
    //when
    processService.save(process)
        .also { saved -&gt;
            //then
            assertNotNull(saved.id)
            assertNotNull(saved.createdAt)
            assertEquals(process.state, saved.state)
        }
}</code></pre><p>Этап 4 мы реализуем централизованно чуть позже.</p><p>Итак, мы написали тест. Теперь, когда он будет запущен, он ожидаемо упадёт. И в этом нет ничего аномального. Ведь любой тест должен соответствовать принципу «Красный — Зелёный — Рефакторинг».</p><h3>Принцип «Красный — Зелёный — Рефакторинг»</h3><p>Как и любой продукт (даже цифровой), тест проходит свои этапы созревания. Этих этапов три. И каждый из них — обязателен (за некоторыми исключениями).</p><figure class="full-width"><img data-src="https://habrastorage.org/getpro/habr/upload_files/370/c6d/9be/370c6d9be9c015ecba22dff7202e022f.png" height="2160" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/370/c6d/9be/370c6d9be9c015ecba22dff7202e022f.png" width="3138"/></figure><h4>Этап «Красный»</h4><p>Согласно разработке через тестирование, мы сначала пишем тест, а уж потом — реализацию. Таким образом, на первоначальном этапе тест просто обязан упасть (ведь реализации-то нет).</p><p>Обязательно запустите тест и убедитесь, что он падает. Если тест не падает, и вы не знаете, почему, значит, такой тест ничего не проверяет.</p><h4>Этап «Зелёный»</h4><p>После того, как наш тест упал, мы переходим в пакет main и пишем реализацию. После этого наш тест перестаёт падать и становится «зелёным».</p><h4>Этап «Рефакторинг»</h4><p>Согласно Третьему Правилу TDD, мы должны перейти к написанию следующего теста. Но это рекомендуется делать не сразу. Возьмите паузу и порефачьте код. Сразу после реализации функции намного проще её причесать, чем потом.</p><p>Итак, наш тест упал. Перейдём в пакет main и посмотрим, что можно сделать, чтобы его починить.</p><h3>Реализация тестируемой функции</h3><p>Мы переходим в <code>ProcessServiceImpl</code> и видим такую картину:</p><pre><code class="kotlin">override fun save(process: Process): Process {
    TODO("Not yet implemented")
}</code></pre><p>Для того, чтобы наш тест стал «зелёным», необходимо, чтобы функция save возвращала Process с заполненными <code>id</code> и <code>createdAt</code>. Для этого нужно передать <code>process</code> в репозиторий и получить оттуда сохранённый объект.</p><p>Давайте напишем такую реализацию:</p><pre><code class="kotlin">override fun save(process: Process): Process = repository.insert(process)</code></pre><p>Но есть проблема. У нас нет никакого репозитория, и уж тем более, базы данных, и мы даже не знаем, какими они будут. Ведь такие вещи Роберт Мартин рекомендует оставлять на потом. А нужны они нам уже сейчас. Как быть?</p><p>В такой ситуации уместно будет воспользоваться mock-репозиторием и mock-хранилищем. Репозиторий мы разместим сразу в пакете <code>test</code>, потому что в реальной разработке он нам никогда не потребуется. Хранилищем будет стандартная хэш-таблица, идентификатором в качестве ключа и объектом в качестве значения.</p><figure class="full-width"><img alt="Mock-реализации спасут нас на этапе тестового покрытия сервисов" data-src="https://habrastorage.org/getpro/habr/upload_files/17e/37b/ce2/17e37bce2dc8e2146053af9d9d4ac497.png" height="1532" src="https://habrastorage.org/r/w1560/getpro/habr/upload_files/17e/37b/ce2/17e37bce2dc8e2146053af9d9d4ac497.png" title="Mock-реализации спасут нас на этапе тестового покрытия сервисов" width="3840"/><div><figcaption>Mock-реализации спасут нас на этапе тестового покрытия сервисов</figcaption></div></figure><p>Выглядеть такой репозиторий будет так:</p><pre><code class="kotlin">@Component
class ProcessRepositoryMock(
    private val processStorageMock: MutableMap&lt;UUID, Process&gt;
) : ProcessRepository {

    override fun insert(process: Process): Process =
        process.copy(id = UUID.randomUUID(), createdAt = OffsetDateTime.now())
            .also { processStorageMock[it.id!!] = it }
}</code></pre><p>Моковый репозиторий делает необходимый минимум, который должен уметь делать любой репозиторий — обогащает объект служебными полями и сохраняет его в базе данных.</p><p>Запускаем наш тест. Тест проходит. Ура.</p><p>Третий шаг реализации теста — «<em>Проверка результата</em>» — происходит сам собой. Но мы не реализовали четвёртый шаг — «<em>Очистку данных</em>».</p><h4>Этап 4. Очистка данных</h4><p>Теперь, когда у нас есть репозиторий и база данных (хоть и mock), мы можем их очистить данные, приведя базу в первоначальное состояние. Это важный и необходимый шаг в реализации любого теста.</p><pre><code class="kotlin">@Autowired
private lateinit var processStorageMock: MutableMap&lt;UUID, Process&gt;

@AfterEach
fun cleanUp() {
    processStorageMock.clear()
}</code></pre><p>Теперь после каждого теста наша mock-база данных будет очищаться.</p><h2>Что мы сделали?</h2><p>Мы написали один маленький тест и сделали его «Зелёным». Мы написали очень важный для тестирования генератор данных, а также, mock‑репозиторий.</p><p>Но произошло ещё кое‑что действительно важное, на чём мы не акцентировали внимание. Попутно, мимоходом, мы написали реализацию функции <code>ProcessService.save</code>. И все остальные функции так же, попутно, будут реализовываться. Мы лишь будем писать тесты и делать их «Зелёными».</p><p>И это самый важный момент в разработке через тестирование: мы фокусируемся не на реализации целевых функций, а на написании армии маленьких тестов и достижении их прохождения.</p><p>Это и есть разработка через тестирование.</p><hr/><h2>Заключительные тезисы</h2><h3>Mock-компоненты</h3><p>Mock-компоненты помогают нам вести разработку через тестирование на любом этапе, позволяя нам не нарушать стандартный ход реализации приложения. Да, на каком-то этапе мы можем попросту не знать, какая у нас будет база данных, какое окружение и прочее. Но это и не нужно. На первоначальном этапе нам поможет мок.</p><p>Да, потом, когда мы спроектируем базу данных, у нас появятся интеграционные тесты на базу данных или тест-контейнеры. Но даже в этом случае, мы сможем вынести моки под отдельный профиль и запускать там, где, по каким-то причинам, запуск тест-контейнеров невозможен.</p><h3>Генераторы</h3><p>Генераторы пишутся один раз, используются постоянно. Со временем они будут обрастать полями и всевозможными параметрами, которые будут позволят тонко настраивать генерируемую сущность. Некоторые из них переживут не один релиз, некоторые устареют и будут удалены. Но роль генераторов в разработке через тестирование огромна.</p><p>Разрабатывая через тестирование, мы постоянно будем писать тесты. А значит, нам постоянно будут нужны генераторы данных. И если вы их не пишете, значит, вы не хотите писать тесты и втайне надеетесь, что напишете тесты один раз и забудете про них. Не обманывайте себя.</p><hr/><p>По традиции, выкладываю код с примерами:</p><p><a href="https://github.com/promoscow/tdd-habr">https://github.com/promoscow/tdd-habr</a></p><blockquote><p>Обратите внимание, что в git-логе есть 4 коммита, по количеству написанных тестов:</p><ul><li><p>Шаг 1. Пишем тест на функцию <code>save()</code> + генератор + mock-репозиторий + mock-хранилище.</p></li><li><p>Шаг 2. Добавляем тест на функцию <code>get()</code>.</p></li><li><p>Шаг 3. Добавляем тест на функцию <code>update()</code>.</p></li><li><p>Шаг 4. Добавляем тест на функцию <code>delete()</code>.</p></li></ul><p>Откатиться на любой коммит можно через <code>Reset Current Branch To Here... -&gt; Hard</code>.</p></blockquote><h2>Если некогда читать...</h2><p>...у меня есть видео с конференции IT Community Day, которая прошла 12 октября 2024 года в Казани. Практически полный пересказ данной статьи с live-кодингом.</p><div class="tm-iframe_temp" data-src="https://embedd.srv.habr.com/iframe/6739bbccfbab546b0d3eb48e" data-style="" id="6739bbccfbab546b0d3eb48e" width=""></div><p>Запись доклада также есть и на <a href="https://youtu.be/zAXCNYZ0Eqc">YouTube</a>.</p><p>На этом, пока всё. Пишите тесты, реализуйте прекрасные фичи и наслаждайтесь своей работой.</p><p></p></div></div></div><!-- --><!-- --></div><!-- --><div class="tm-article-poll-container"><!--[--><div class="tm-article-poll tm-article-poll_variant-bordered"><div class="tm-notice tm-notice_positive tm-article-poll__notice"><!-- --><div class="tm-notice__inner"><!-- --><div class="tm-notice__content" data-test-id="notice-content"><!--[--><span>Только зарегистрированные пользователи могут участвовать в опросе. <a href="/kek/v1/auth/habrahabr/?back=/ru/companies/sberbank/articles/851052/&amp;hl=ru" rel="nofollow">Войдите</a>, пожалуйста.</span><!--]--></div></div></div><!--[--><div class="tm-article-poll__header">Ну и небольшой опрос. Как у вас обстоят дела с тестами?</div><div class="tm-article-poll__answers"><!--[--><div class="tm-article-poll__answer"><div class="tm-article-poll__answer-data"><span class="tm-article-poll__answer-percent">12.9% </span><span class="tm-article-poll__answer-label">Не пишу тесты принципиально</span><span class="tm-article-poll__answer-votes">4</span></div><div class="tm-article-poll__answer-bar"><div class="tm-article-poll__answer-progress" style="width: 12.9%"></div></div></div><div class="tm-article-poll__answer"><div class="tm-article-poll__answer-data"><span class="tm-article-poll__answer-percent tm-article-poll__answer-percent_winning">51.61% </span><span class="tm-article-poll__answer-label">Пишу тесты, но не гонюсь за покрытием</span><span class="tm-article-poll__answer-votes">16</span></div><div class="tm-article-poll__answer-bar"><div class="tm-article-poll__answer-progress tm-article-poll__answer-progress_winning" style="width: 51.61%"></div></div></div><div class="tm-article-poll__answer"><div class="tm-article-poll__answer-data"><span class="tm-article-poll__answer-percent">29.03% </span><span class="tm-article-poll__answer-label">Покрываю тестами от 80% кода</span><span class="tm-article-poll__answer-votes">9</span></div><div class="tm-article-poll__answer-bar"><div class="tm-article-poll__answer-progress" style="width: 29.03%"></div></div></div><div class="tm-article-poll__answer"><div class="tm-article-poll__answer-data"><span class="tm-article-poll__answer-percent">6.45% </span><span class="tm-article-poll__answer-label">Разрабатываю через тестирование, по заветам Кента Бека и Роберта Мартина</span><span class="tm-article-poll__answer-votes">2</span></div><div class="tm-article-poll__answer-bar"><div class="tm-article-poll__answer-progress" style="width: 6.45%"></div></div></div><!--]--></div><div class="tm-article-poll__stats"> Проголосовал 31 пользователь.   Воздержались 4 пользователя. </div><!--]--></div><!--]--></div></div><!--]--><!-- --><div class="tm-article-presenter__meta" data-test-id="article-meta-links"><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Теги:</span><ul class="tm-separated-list__list"><!--[--><li class="tm-separated-list__item"><!--[--><a class="tm-tags-list__link" href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=[%D1%80%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0+%D1%87%D0%B5%D1%80%D0%B5%D0%B7+%D1%82%D0%B5%D1%81%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5]"><span>разработка через тестирование</span></a><!--]--></li><li class="tm-separated-list__item"><!--[--><a class="tm-tags-list__link" href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=[%D1%80%D0%BE%D0%B1%D0%B5%D1%80%D1%82+%D0%BC%D0%B0%D1%80%D1%82%D0%B8%D0%BD]"><span>роберт мартин</span></a><!--]--></li><li class="tm-separated-list__item"><!--[--><a class="tm-tags-list__link" href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=[%D1%87%D0%B8%D1%81%D1%82%D1%8B%D0%B9+%D0%BA%D0%BE%D0%B4]"><span>чистый код</span></a><!--]--></li><li class="tm-separated-list__item"><!--[--><a class="tm-tags-list__link" href="/ru/search/?target_type=posts&amp;order=relevance&amp;q=[%D0%BA%D0%B5%D0%BD%D1%82+%D0%B1%D0%B5%D0%BA]"><span>кент бек</span></a><!--]--></li><!--]--><!-- --></ul></div><div class="tm-separated-list tm-article-presenter__meta-list"><span class="tm-separated-list__title">Хабы:</span><ul class="tm-separated-list__list"><!--[--><li class="tm-separated-list__item"><!--[--><a class="tm-hubs-list__link" href="/ru/companies/sberbank/articles/"><!--[--><span>Блог компании Сбер</span><!--]--></a><!--]--></li><li class="tm-separated-list__item"><!--[--><a class="tm-hubs-list__link" href="/ru/hubs/programming/"><!--[--><span>Программирование</span><!--]--></a><!--]--></li><li class="tm-separated-list__item"><!--[--><a class="tm-hubs-list__link" href="/ru/hubs/web_testing/"><!--[--><span>Тестирование веб-сервисов</span><!--]--></a><!--]--></li><li class="tm-separated-list__item"><!--[--><a class="tm-hubs-list__link" href="/ru/hubs/java/"><!--[--><span>Java</span><!--]--></a><!--]--></li><li class="tm-separated-list__item"><!--[--><a class="tm-hubs-list__link" href="/ru/hubs/kotlin/"><!--[--><span>Kotlin</span><!--]--></a><!--]--></li><!--]--><!-- --></ul></div></div><!-- --><!--]--></article><!--]--></div><!-- --></div><div class="tm-article-sticky-panel" data-test-id="article-sticky-panel" style=""><div class="tm-data-icons tm-data-icons tm-data-icons_space-big tm-article-sticky-panel__icons" data-test-id="article-stats-icons"><div class="tm-article-rating tm-data-icons__item"><div class="tm-votes-meter tm-article-rating__votes-switcher"><svg class="tm-svg-img tm-votes-meter__icon tm-votes-meter__icon tm-votes-meter__icon_appearance-article" height="24" width="24"><title>Всего голосов 23: ↑22 и ↓1</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#counter-rating"></use></svg><span class="tm-votes-meter__value tm-votes-meter__value_positive tm-votes-meter__value_appearance-article tm-votes-meter__value_rating tm-votes-meter__value" data-test-id="votes-meter-value" title="Всего голосов 23: ↑22 и ↓1">+33</span></div><!--teleport start--><!--teleport end--><!-- --></div><!-- --><!-- --><button class="bookmarks-button tm-data-icons__item" title="Добавить в закладки" type="button"><span class="tm-svg-icon__wrapper bookmarks-button__icon"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Добавить в закладки</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#counter-favorite"></use></svg></span><span class="bookmarks-button__counter" title="Количество пользователей, добавивших публикацию в закладки">46</span></button><div class="tm-sharing tm-data-icons__item" title="Поделиться"><button class="tm-sharing__button" type="button"><svg class="tm-sharing__icon" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13.8 13.8V18l7.2-6.6L13.8 5v3.9C5 8.9 3 18.6 3 18.6c2.5-4.4 6-4.8 10.8-4.8z" fill="currentColor"></path></svg></button><!--teleport start--><!--teleport end--></div><div class="tm-article-comments-counter-link tm-data-icons__item" title="Читать комментарии"><a class="tm-article-comments-counter-link__link" data-test-id="counter-comments" href="/ru/companies/sberbank/articles/851052/comments/"><!--[--><svg class="tm-svg-img tm-article-comments-counter-link__icon" height="24" width="24"><title>Комментарии</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#counter-comments"></use></svg><span class="tm-article-comments-counter-link__value">43</span><!--]--></a><!-- --></div><!--[--><!--[--><!--[--><!-- --><!--]--><!--]--><!--]--><!--teleport start--><!--teleport end--><!-- --></div></div></div><!--[--><!--]--><div class="tm-article-presenter__footer"><!--[--><!--[--><div class="tm-article-blocks"><!-- --><!--[--><section class="tm-block tm-block tm-block_spacing-bottom"><!-- --><!--[--><div class="tm-block__body tm-block__body tm-block__body_variant-balanced"><!--[--><div class="tm-article-author" data-test-id="article-author-info"><!--[--><!--[--><div class="tm-article-author__company"><div class="tm-article-author__company-card"><div class="tm-company-snippet"><a class="tm-company-snippet__logo-link" href="/ru/companies/sberbank/profile/"><div class="tm-entity-image"><img alt="" class="tm-entity-image__pic" height="40" src="//habrastorage.org/getpro/habr/company/9db/3c1/ec0/9db3c1ec02265b8bcbfdfb0d23d8b9f2.jpg" width="40"/></div></a><div class="tm-company-snippet__info"><a class="tm-company-snippet__title" data-test-id="company-title" href="/ru/companies/sberbank/profile/"><span>Сбер</span></a><div class="tm-company-snippet__description">Технологии, меняющие мир</div></div></div><div class="tm-article-author__buttons"><!-- --><!-- --></div></div><!-- --><div class="tm-article-author__separator"></div></div><!--]--><!--]--><div class="tm-user-card tm-user-card tm-user-card_variant-article tm-article-author__user-card" data-async-called="true"><div class="tm-user-card__info-container"><div class="tm-user-card__header"><div class="tm-user-card__header-data"><a class="tm-user-card__userpic tm-user-card__userpic_size-40" href="/ru/users/xpendence/"><div class="tm-entity-image"><img alt="" class="tm-entity-image__pic" src="//habrastorage.org/getpro/habr/avatars/e27/9c5/cf5/e279c5cf56942c512857d7a503b92c95.jpg"/></div></a><div class="tm-user-card__meta"><div class="tm-counter-container tm-karma tm-karma" title=" 102 голоса "><div class="tm-counter-container__header"><!--[--><div class="karma-display positive" data-v-7635202e="">32</div><!-- --><!--]--></div><div class="tm-counter-container__footer"><!--[--><div class="tm-karma__text">Карма</div><!--teleport start--><!--teleport end--><!--]--></div></div><div class="tm-counter-container" title="Рейтинг пользователя"><div class="tm-counter-container__header"><!--[--><!--[--><!--]--><div class="tm-votes-lever tm-votes-lever tm-votes-lever_appearance-rating"><!-- --><div class="tm-votes-lever__score tm-votes-lever__score_appearance-rating tm-votes-lever__score"><!--[--><span><span class="tm-votes-lever__score-counter tm-votes-lever__score-counter_rating tm-votes-lever__score-counter" data-test-id="votes-score-counter">0</span></span><!--]--></div><!-- --></div><!--]--></div><div class="tm-counter-container__footer"><!--[--><span class="tm-rating__text tm-rating__text">Рейтинг</span><!--]--></div></div></div></div></div><div class="tm-user-card__info tm-user-card__info_variant-article tm-user-card__info"><div class="tm-user-card__title tm-user-card__title_variant-article tm-user-card__title"><span class="tm-user-card__name tm-user-card__name_variant-article tm-user-card__name">Вячеслав Чернышов</span><a class="tm-user-card__nickname tm-user-card__nickname tm-user-card__nickname_variant-article" href="/ru/users/xpendence/"> @xpendence</a><!-- --></div><p class="tm-user-card__short-info tm-user-card__short-info_variant-article tm-user-card__short-info" data-test-id="user-card-speciality">backend.developer { java, kotlin }.in(Sber)</p></div></div><div class="tm-user-card__buttons tm-user-card__buttons_variant-article tm-user-card__buttons"><!-- --><div class="tm-user-card__button"><div class="tm-button-follow tm-user-card__button-follow"><!-- --><button class="tm-button-follow__button tm-button-follow__button_big" data-test-id="follow-button" type="button">Подписаться</button></div></div><!-- --><div class="tm-user-card__button tm-user-card__button_write" data-test-id="user-card-conversations"><svg class="tm-svg-img tm-user-card__button-icon" height="16" width="16"><title>Отправить сообщение</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#mail"></use></svg></div><!-- --></div><!-- --></div><div class="tm-article-author__user-contacts" data-test-id="author-contacts"><!--[--><a class="tm-article-author__contact" data-test-id="author-contact-link" href="http://developer.xpendence.ru" rel="noopener" target="_blank">Сайт</a><!--]--></div></div><!--]--></div><!--]--><!-- --></section><!-- --><!--[--><!-- --><!-- --><!--]--><!--]--><div class="tm-article-blocks__comments"><div class="tm-article-page-comments" id="publication-comments"><div><!--[--><div class="tm-article-comments-counter-link tm-article-comments-counter-button"><a class="tm-article-comments-counter-link__link tm-article-comments-counter-link__link_button-style" data-test-id="counter-comments" href="/ru/companies/sberbank/articles/851052/comments/"><!--[--><svg class="tm-svg-img tm-article-comments-counter-link__icon tm-article-comments-counter-link__icon_contrasted" height="24" width="24"><title>Комментарии</title><use xlink:href="/img/megazord-v28.371b7fa3..svg#counter-comments"></use></svg><span class="tm-article-comments-counter-link__value tm-article-comments-counter-link__value_contrasted"> Комментарии 43 </span><!--]--></a><!-- --></div><!--]--></div></div></div><!--[--><!--[--><!--]--><!-- --><!--[--><!--[--><div class="placeholder-wrapper"><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><div class="tm-placeholder-inset tm-placeholder-vacancies"><div class="tm-placeholder-inset__header"><div class="tm-placeholder__line tm-placeholder__line_inset-header loads"></div></div><div class="tm-placeholder-inset__body"><ul class="tm-placeholder-list"><!--[--><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div><div class="tm-project-block-items__properties"><!--[--><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><!--]--></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div><div class="tm-project-block-items__properties"><!--[--><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><!--]--></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div><div class="tm-project-block-items__properties"><!--[--><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><!--]--></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div><div class="tm-project-block-items__properties"><!--[--><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><!--]--></div></li><li class="tm-placeholder-list__item tm-placeholder-list__item_inset"><div class="tm-placeholder-list__title-container"><div class="tm-placeholder__line tm-placeholder__line_item-title loads"></div></div><div class="tm-project-block-items__properties"><!--[--><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><span class="tm-project-block-items__property-item"><span class="tm-placeholder__line loads" style="width:100px;"></span></span><!--]--></div></li><!--]--></ul></div><div class="tm-placeholder-inset__footer"><div class="tm-placeholder__line tm-placeholder__line_inset-footer loads"></div></div></div><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --><!-- --></div><!--]--><!--]--><!-- --><!--[--><!--]--><!--]--></div><!--]--><!--]--></div></div><!--]--><!--]--></div></div><div class="tm-page__sidebar"><!--[--><div class="tm-layout-sidebar"><div class="tm-layout-sidebar__placeholder_initial"></div><div class="tm-sexy-sidebar_initial tm-sexy-sidebar" style="margin-top:0px;"><!--[--><!--]--><!-- --><div class="tm-layout-sidebar__placeholder_initial"></div><!--[--><section class="tm-block tm-block tm-block_spacing-bottom"><header class="tm-block__header tm-block__header"><div class="tm-block__header-container"><h2 class="tm-block__title tm-block__title">Информация</h2><!--[--><!--]--></div><!-- --></header><!--[--><div class="tm-block__body tm-block__body"><!--[--><div class="tm-company-basic-info"><dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap tm-description-list__title">Сайт</dt><dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap tm-description-list__body"><!--[--><a class="tm-company-basic-info__link" href="http://www.sber.ru/" target="_blank">www.sber.ru</a><!--]--></dd></dl><dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap tm-description-list__title">Дата регистрации</dt><dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap tm-description-list__body"><!--[--><time datetime="2011-02-08T10:09:33.000Z" title="2011-02-08, 13:09">8  февраля  2011</time><!--]--></dd></dl><dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap tm-description-list__title">Дата основания</dt><dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap tm-description-list__body"><!--[--><time datetime="1841-11-11T21:29:43.000Z" title="1841-11-12, 00:00">12  ноября  1841</time><!--]--></dd></dl><dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap tm-description-list__title">Численность</dt><dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap tm-description-list__body"><!--[-->свыше 10 000 человек<!--]--></dd></dl><dl class="tm-description-list tm-description-list tm-description-list_variant-columns-nowrap"><dt class="tm-description-list__title tm-description-list__title_variant-columns-nowrap tm-description-list__title">Местоположение</dt><dd class="tm-description-list__body tm-description-list__body_variant-columns-nowrap tm-description-list__body"><!--[-->Россия<!--]--></dd></dl><!-- --></div><!--]--></div><!--]--><!-- --></section><div class="tm-company-widgets"><!--[--><!--]--></div><!-- --><!-- --><!--]--><!-- --></div></div><!--]--></div></div><!-- --><!--]--></div></div></main><!-- --></div><div class="tm-footer-menu"><div class="tm-page-width"><!--[--><div class="tm-footer-menu__container"><!--[--><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">Ваш аккаунт</p><div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><!--[--><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr/?back=/ru/companies/sberbank/articles/851052/&amp;hl=ru" rel="nofollow" target="_self">Войти</a></li><li class="tm-footer-menu__list-item"><a href="/kek/v1/auth/habrahabr-register/?back=/ru/companies/sberbank/articles/851052/&amp;hl=ru" rel="nofollow" target="_self">Регистрация</a></li><!--]--></ul></div></div><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">Разделы</p><div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><!--[--><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/articles/">Статьи</a></li><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/news/">Новости</a></li><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/hubs/">Хабы</a></li><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/companies/">Компании</a></li><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/users/">Авторы</a></li><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/sandbox/">Песочница</a></li><!--]--></ul></div></div><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">Информация</p><div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><!--[--><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/docs/help/">Устройство сайта</a></li><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/docs/authors/codex/">Для авторов</a></li><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/docs/companies/corpblogs/">Для компаний</a></li><li class="tm-footer-menu__list-item"><a class="footer-menu__item-link" href="/ru/docs/docs/transparency/">Документы</a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/agreement/?hl=ru_RU" target="_blank">Соглашение</a></li><li class="tm-footer-menu__list-item"><a href="https://account.habr.com/info/confidential/?hl=ru_RU" target="_blank">Конфиденциальность</a></li><!--]--></ul></div></div><div class="tm-footer-menu__block"><p class="tm-footer-menu__block-title">Услуги</p><div class="tm-footer-menu__block-content"><ul class="tm-footer-menu__list"><!--[--><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/corporate-blogs/" target="_blank">Корпоративный блог</a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/advertising/" target="_blank">Медийная реклама</a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/native-special/" target="_blank">Нативные проекты</a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/education-programs/" target="_blank">Образовательные программы</a></li><li class="tm-footer-menu__list-item"><a href="https://company.habr.com/ru/hello-startup/" target="_blank">Стартапам</a></li><!--]--></ul></div></div><!--]--></div><!--]--></div></div><div class="tm-footer"><div class="tm-page-width"><!--[--><div class="tm-footer__container"><!-- --><div class="tm-footer__social"><!--[--><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://www.facebook.com/habrahabr.ru" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Facebook</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-facebook"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://twitter.com/habr_com" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Twitter</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-twitter"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://vk.com/habr" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>VK</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-vk"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://telegram.me/habr_com" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Telegram</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-telegram"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://www.youtube.com/channel/UCd_sTwKqVrweTt4oAKY5y4w" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Youtube</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-youtube"></use></svg></a><a class="tm-svg-icon__wrapper tm-social-icons__icon" href="https://dzen.ru/habr" rel="nofollow noopener noreferrer" target="_blank"><svg class="tm-svg-img tm-svg-icon" height="24" width="24"><title>Яндекс Дзен</title><use xlink:href="/img/new-social-icons-sprite.svg#social-logo-dzen"></use></svg></a><!--]--></div><!--teleport start--><!--teleport end--><button class="tm-footer__link"><!-- --> Настройка языка</button><a class="tm-footer__link" href="/ru/feedback/">Техническая поддержка</a><div class="tm-footer-copyright"><span class="tm-copyright"><span class="tm-copyright__years">© 2006–2025, </span><span class="tm-copyright__name"><a class="tm-copyright__link" href="https://company.habr.com/" rel="noopener" target="_blank">Habr</a></span></span></div></div><!--]--></div></div><!-- --><!--]--></div><!-- --></div></div>
<div id="overlays"><!-- --><!--teleport anchor--><!-- --><!--teleport anchor--><!-- --><!--teleport anchor--><!-- --><!--teleport anchor--><!-- --><!--teleport anchor--><!-- --><!--teleport anchor--></div>
</body>
</html>
